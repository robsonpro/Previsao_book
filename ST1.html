<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robson Bruno Dutra Pereira">

<title>Séries Temporais e Previsão - 1&nbsp; Introdução e gráficos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ST2.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ST1.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e gráficos</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Séries Temporais e Previsão</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e gráficos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Análise descritiva, métodos simples de previsão e diagnóstico</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Decomposição de séries temporais</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Regressão de séries temporais</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Suavização exponencial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Modelos auto-regressivos integrados de médias móveis (ARIMA)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#introdução-às-séries-temporais-e-previsão" id="toc-introdução-às-séries-temporais-e-previsão" class="nav-link active" data-scroll-target="#introdução-às-séries-temporais-e-previsão"><span class="header-section-number">1.1</span> Introdução às séries temporais e previsão</a></li>
  <li><a href="#exemplos-de-séries-e-visualizações" id="toc-exemplos-de-séries-e-visualizações" class="nav-link" data-scroll-target="#exemplos-de-séries-e-visualizações"><span class="header-section-number">1.2</span> Exemplos de séries e visualizações</a>
  <ul class="collapse">
  <li><a href="#séries-univariadas" id="toc-séries-univariadas" class="nav-link" data-scroll-target="#séries-univariadas"><span class="header-section-number">1.2.1</span> Séries univariadas</a></li>
  <li><a href="#séries-temporais-multivariadas" id="toc-séries-temporais-multivariadas" class="nav-link" data-scroll-target="#séries-temporais-multivariadas"><span class="header-section-number">1.2.2</span> Séries temporais multivariadas</a></li>
  <li><a href="#graficos-de-sazonalidade" id="toc-graficos-de-sazonalidade" class="nav-link" data-scroll-target="#graficos-de-sazonalidade"><span class="header-section-number">1.2.3</span> Graficos de sazonalidade</a></li>
  <li><a href="#correlação-entre-séries" id="toc-correlação-entre-séries" class="nav-link" data-scroll-target="#correlação-entre-séries"><span class="header-section-number">1.2.4</span> Correlação entre séries</a></li>
  <li><a href="#gráficos-de-decomposição" id="toc-gráficos-de-decomposição" class="nav-link" data-scroll-target="#gráficos-de-decomposição"><span class="header-section-number">1.2.5</span> Gráficos de decomposição</a></li>
  <li><a href="#gráficos-de-previsão" id="toc-gráficos-de-previsão" class="nav-link" data-scroll-target="#gráficos-de-previsão"><span class="header-section-number">1.2.6</span> Gráficos de previsão</a></li>
  </ul></li>
  <li><a href="#implementação-em-r" id="toc-implementação-em-r" class="nav-link" data-scroll-target="#implementação-em-r"><span class="header-section-number">1.3</span> Implementação em R</a></li>
  <li><a href="#execícios-propostos" id="toc-execícios-propostos" class="nav-link" data-scroll-target="#execícios-propostos"><span class="header-section-number">1.4</span> Execícios propostos</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e gráficos</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Robson Bruno Dutra Pereira </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introdução-às-séries-temporais-e-previsão" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="introdução-às-séries-temporais-e-previsão"><span class="header-section-number">1.1</span> Introdução às séries temporais e previsão</h2>
<p>Uma série temporal consiste em um conjunto de observações de uma variável aleatória ordenadas no tempo. Uma série temporal pode ser descrita matematicamente como <span class="math inline">\(y_1, ..., y_T\)</span>, onde <span class="math inline">\(T\)</span> consiste no último período da série. A análise de séries temporais visa o estudo e obtenção de modelos preditivos para este tipo de dados. O objetivo ao final é realizar previsões com o modelo obtido, de forma a viabilizar ações de planejamento, prever cenários e possibilidades.</p>
<p>A previsão é importante em diversos contextos das engenharias, administração e ciências. Por exemplo, para decidir o nível de produção e planejar o próximo período é necessário prever a demanda. Para avaliar se um investimento é viável é importante prever a sua rentabilidade. Para planejamento dos sistemas energéticos é importante prever o consumo de energia. Para prever a capacidade de produção de energia hidroelétrica é preciso prever a precipitação.</p>
<p>Neste curso serão apresentados diversos modelos para análise e previsão de séries temporais, sendo boa parte dos exemplos obtidos de casos brasileiros. Serão consideradas séries de dados de produção, indústria, agricultura, clima, energia, economia, investimentos, mobilidade, transporte, saúde, entre outros.</p>
</section>
<section id="exemplos-de-séries-e-visualizações" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="exemplos-de-séries-e-visualizações"><span class="header-section-number">1.2</span> Exemplos de séries e visualizações</h2>
<section id="séries-univariadas" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="séries-univariadas"><span class="header-section-number">1.2.1</span> Séries univariadas</h3>
<p>Na <a href="#fig-ipca1">Figura&nbsp;<span>1.1</span></a> observa-se graficamente a série temporal do índice de preços ao consumidor (IPCA), com frequência mensal a partir de 1980. A série foi obtida em <a href="http://www.ipeadata.gov.br">Ipeadata</a>. As primeiras observações da série também são exibidas na <a href="#tbl-ipca">Tabela&nbsp;<span>1.1</span></a>. Observa-se claramente como a inflação no país foi controlada a partir da adoção do plano real.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-ipca" class="anchored">
<table class="table table-sm table-striped small">
<caption>Tabela&nbsp;1.1: IPCA no Brasil</caption>
<thead>
<tr class="header">
<th style="text-align: left;">index</th>
<th style="text-align: right;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1980 Feb</td>
<td style="text-align: right;">4.62</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980 Mar</td>
<td style="text-align: right;">6.04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1980 Apr</td>
<td style="text-align: right;">5.29</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980 May</td>
<td style="text-align: right;">5.70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1980 Jun</td>
<td style="text-align: right;">5.31</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980 Jul</td>
<td style="text-align: right;">5.55</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-ipca1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-ipca1-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.1: IPCA no Brasil</figcaption>
</figure>
</div>
</div>
</div>
<p>Para visualizar melhor como o IPCA variou nos últimos 20 anos, pode-se selecionar os dados a partir do ano 2000. O resultado é plotado na <a href="#fig-ipca2">Figura&nbsp;<span>1.2</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-ipca2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-ipca2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.2: IPCA no Brasil a partir de 2000</figcaption>
</figure>
</div>
</div>
</div>
<p>A <a href="#tbl-carros">Tabela&nbsp;<span>1.2</span></a> exibe as primeiras observações da série temporal de volume de carros produzidos no Brasil a partir de 1990. A série foi obtida em <a href="https://anfavea.com.br/site/edicoes-em-excel/">dados estatísticos ANFAVEA</a> e apresenta frequência mensal.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-carros" class="anchored">
<table class="table table-sm table-striped small">
<caption>Tabela&nbsp;1.2: Produção de carros no Brasil</caption>
<thead>
<tr class="header">
<th style="text-align: left;">data</th>
<th style="text-align: right;">valor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1990-02-01</td>
<td style="text-align: right;">57258</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990-03-01</td>
<td style="text-align: right;">32740</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1990-04-01</td>
<td style="text-align: right;">32812</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990-05-01</td>
<td style="text-align: right;">58464</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1990-06-01</td>
<td style="text-align: right;">37632</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990-07-01</td>
<td style="text-align: right;">43697</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A série é plotada na <a href="#fig-carros">Figura&nbsp;<span>1.3</span></a>. Pode-se observar alguns períodos de queda no volume, por exemplo, próximo de 2015 durante a crise política do país e em 2020 durante a pandemia, onde a demanda chegou a níveis anteriores aos dos anos 2000.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-carros" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-carros-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.3: Vendas de carros no Brasil</figcaption>
</figure>
</div>
</div>
</div>
<p>A <a href="#fig-co2">Figura&nbsp;<span>1.4</span></a> apresenta a série temporal de níveis de <span class="math inline">\(CO_2\)</span> na atmosfera medida no Observatório Mauna Loa, Havaí, desde 1958, <a href="https://climate.nasa.gov/vital-signs/carbon-dioxide">Climate Change - NASA</a>). Observa-se um padrão de crescimento não linear com ciclos sazonais bem definidos.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-co2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-co2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.4: Emissões de CO2, Observatório Mauna Loa, Havaí</figcaption>
</figure>
</div>
</div>
</div>
<p>A <a href="#fig-co2_">Figura&nbsp;<span>1.5</span></a> plota a série a partir de 2020. Pode-se observar que os períodos sazonais de pico coincidem com o fim doinverno no hemisfério norte, enquanto os vales são observados no período de crescimento das plantas, as quais capturam parte significativa do <span class="math inline">\(CO_2\)</span> da atmosfera.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-co2_" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-co2_-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.5: Emissões de CO2, a partir de 2020</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="séries-temporais-multivariadas" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="séries-temporais-multivariadas"><span class="header-section-number">1.2.2</span> Séries temporais multivariadas</h3>
<p>Na <a href="#tbl-energia1">Tabela&nbsp;<span>1.3</span></a> são exibidas apenas as primeiras observações de séries de produção de quatro tipos de energia para o ano de 2023 no Brasil. Os dados são fornecidos em frequência horária e estão disponíveis em <a href="https://dados.ons.org.br/group/programacao-da-operacao">Dados abertos do operador nacional do sistema elétrico</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-energia1" class="anchored">
<table class="table table-sm table-striped small">
<caption>Tabela&nbsp;1.3: Produção de energia no Brasil em 2023</caption>
<thead>
<tr class="header">
<th style="text-align: left;">din_instante</th>
<th style="text-align: left;">name</th>
<th style="text-align: right;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2023-01-01 00:00:00</td>
<td style="text-align: left;">hidraulica</td>
<td style="text-align: right;">39057.309</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-01-01 00:00:00</td>
<td style="text-align: left;">termica</td>
<td style="text-align: right;">5698.335</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-01-01 00:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">14138.750</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-01-01 00:00:00</td>
<td style="text-align: left;">solar</td>
<td style="text-align: right;">21.155</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-01-01 01:00:00</td>
<td style="text-align: left;">hidraulica</td>
<td style="text-align: right;">39624.650</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-01-01 01:00:00</td>
<td style="text-align: left;">termica</td>
<td style="text-align: right;">5727.550</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A série temporal multivariada é plotada na <a href="#fig-energia1">Figura&nbsp;<span>1.6</span></a>. Pode-se observar a queda de produção da fonte hidráulica no período mais seco do ano, além da tendência de aumento da energia solar a partir de maio.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-energia1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-energia1-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.6: Produção de energia no Brasil em 2023</figcaption>
</figure>
</div>
</div>
</div>
<p>A mesma série temporal é plotada na <a href="#fig-energia1223">Figura&nbsp;<span>1.7</span></a> para o mês de dezembro de 2023. De forma geral é possível ver o padrão cíclico diário de consumo considerando a sazonalidade diária com maior consumo durante o dia e menor durante a noite.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-energia1223" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-energia1223-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.7: Produção de energia no Brasil em dezembro de 2023</figcaption>
</figure>
</div>
</div>
</div>
<p>Outro exemplo de série multivariada de índices de produção de bens de capital, de consumo duráveis, intermediários e de consumo não duráveis é plotada na <a href="ST4.html#fig-bem">Figura&nbsp;<span>4.5</span></a>, porém em painéis separados. A série foi obtida em <a href="https://www.ibge.gov.br/estatisticas/economicas/industria/9294-pesquisa-industrial-mensal-producao-fisica-brasil?=&amp;t=series-historicas">Pesquisa industrial mensal - produção física do IBGE</a>. Essa visualização é útil, uma vez que possibilita avaliar melhor o padrão e variabilidade de cada série, permitindo ajustar a escala de cada série de forma individual.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bem" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-bem-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.8: Bens de consumo duráveis, intermediários e de consumo não duráveis</figcaption>
</figure>
</div>
</div>
</div>
<p>As últimas observações de mais um exemplo de série temporal multivariada são observadas na <a href="#tbl-tolaju">Tabela&nbsp;<span>1.4</span></a> considerando dados de visualizaçoes de 4 vídeos da playlist Tolerâncias e ajustes do canal da engenharia de manufatura e qualidade.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-tolaju" class="anchored">
<table class="table table-sm table-striped small">
<caption>Tabela&nbsp;1.4: Visualizações de vídeos de tolerâncias e ajustes no youtube</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Date</th>
<th style="text-align: right;">Views</th>
<th style="text-align: left;">Video</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2024-09-15</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">#4</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-09-16</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">#4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-09-17</td>
<td style="text-align: right;">38</td>
<td style="text-align: left;">#4</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-09-18</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">#4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-09-19</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">#4</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-09-20</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">#4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A série multivariada é plotada na <a href="#fig-tolaju">Figura&nbsp;<span>1.9</span></a>. A série inicia em 2018, ano de início do canal, porém só tem dados segundo a data de lançamento de cada vídeo.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-tolaju" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-tolaju-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.9: Visualizações de vídeos de tolerâncias e ajustes no youtube</figcaption>
</figure>
</div>
</div>
</div>
<p>A série do vídeo 4 a partir de setembro de 2018 é exibida na <a href="#fig-tol4">Figura&nbsp;<span>1.10</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-tol4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-tol4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.10: Visualizações do vídeo 4</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="graficos-de-sazonalidade" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="graficos-de-sazonalidade"><span class="header-section-number">1.2.3</span> Graficos de sazonalidade</h3>
<p>Pode-se visualizar os dados da série do vídeo 4 em subséries anuais, de forma a ver a sazonalidade presente nos dados. A <a href="#fig-saz4">Figura&nbsp;<span>1.11</span></a> expõe o gráfico. Os dados foram agregados mensalmente. Pode-se visualizar os picos de visualizações de Abril a Junho e de Setembro a Outubro, coincidindo com períodos de picos de estudos nos dois semestres anuais.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-saz4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-saz4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.11: Gráfico sazonal: Visualizações do vídeo 4</figcaption>
</figure>
</div>
</div>
</div>
<p>Pode-se plotar o gráfico sazonal visualizando a variação anual dentro de cada mês, conforme <a href="#fig-saz4_">Figura&nbsp;<span>1.12</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-saz4_" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-saz4_-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.12: Gráfico de subséries sazonais: Visualizações do vídeo 4</figcaption>
</figure>
</div>
</div>
</div>
<p>O gráfico sazonal também pode ser útil no caso da série de emissões de CO2, conforme <a href="#fig-co2saz">Figura&nbsp;<span>1.13</span></a>. Observa-se claramente a sazonalidade com pico próximo de maio e declínio próximo de outubro. A tendência de aumento anual de emissões também fica clara na escala de cor que, neste caso, identifica o ano.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-co2saz" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-co2saz-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.13: Gráfico sazonal de Emissões de CO2</figcaption>
</figure>
</div>
</div>
</div>
<p>O gráfico de subséries sazonais, plotado na <a href="#fig-co2_saz_">Figura&nbsp;<span>1.14</span></a>, deixa clara a tendência de aumento de emissões desde o início da série, independente do mês e a sazonalidade com pico em maio e vale em outubro.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-co2_saz_" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-co2_saz_-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.14: Gráfico de subséries sazonais: Emissões de CO2</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="correlação-entre-séries" class="level3" data-number="1.2.4">
<h3 data-number="1.2.4" class="anchored" data-anchor-id="correlação-entre-séries"><span class="header-section-number">1.2.4</span> Correlação entre séries</h3>
<p>A <a href="ST4.html#fig-bens_pairs">Figura&nbsp;<span>4.6</span></a> exibe diagramas de dispersão e correlações aos pares para a série multivaria de produção de bens exposta na Figura <a href="ST4.html#fig-bem">Figura&nbsp;<span>4.5</span></a>. Pode-se confirmar a alta relação linear entre tais índices, com correlação linear positiva variando de 0,70 a 0,84.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bens_pairs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-bens_pairs-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.15: Bens de consumo duráveis, intermediários e de consumo não duráveis</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficos-de-decomposição" class="level3" data-number="1.2.5">
<h3 data-number="1.2.5" class="anchored" data-anchor-id="gráficos-de-decomposição"><span class="header-section-number">1.2.5</span> Gráficos de decomposição</h3>
<p>Existem diversas formas de decompor séries temporais. A <a href="#tbl-co2decomp">Tabela&nbsp;<span>1.5</span></a> expõe os resultados de uma decomposição aditiva da série CO2. A componente cíclica é removida e o restante é suavizado para encontrar uma tendência. O resíduo consiste na diferença entre a série original e a soma da tendência e da componente sazonal.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-co2decomp" class="anchored">
<table class="table table-sm table-striped small">
<caption>Tabela&nbsp;1.5: Decomposição da série de níveis de CO2 na atmosfera</caption>
<thead>
<tr class="header">
<th style="text-align: right;">CO2</th>
<th style="text-align: right;">trend</th>
<th style="text-align: right;">season_year</th>
<th style="text-align: right;">remainder</th>
<th style="text-align: right;">season_adjust</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">315.71</td>
<td style="text-align: right;">314.9477</td>
<td style="text-align: right;">1.0263767</td>
<td style="text-align: right;">-0.2640423</td>
<td style="text-align: right;">314.6836</td>
</tr>
<tr class="even">
<td style="text-align: right;">317.45</td>
<td style="text-align: right;">315.0187</td>
<td style="text-align: right;">2.2221543</td>
<td style="text-align: right;">0.2091377</td>
<td style="text-align: right;">315.2278</td>
</tr>
<tr class="odd">
<td style="text-align: right;">317.51</td>
<td style="text-align: right;">315.0898</td>
<td style="text-align: right;">2.7703197</td>
<td style="text-align: right;">-0.3500701</td>
<td style="text-align: right;">314.7397</td>
</tr>
<tr class="even">
<td style="text-align: right;">317.27</td>
<td style="text-align: right;">315.1608</td>
<td style="text-align: right;">2.2787986</td>
<td style="text-align: right;">-0.1695914</td>
<td style="text-align: right;">314.9912</td>
</tr>
<tr class="odd">
<td style="text-align: right;">315.87</td>
<td style="text-align: right;">315.2266</td>
<td style="text-align: right;">0.8557299</td>
<td style="text-align: right;">-0.2123500</td>
<td style="text-align: right;">315.0143</td>
</tr>
<tr class="even">
<td style="text-align: right;">314.93</td>
<td style="text-align: right;">315.2924</td>
<td style="text-align: right;">-1.0241591</td>
<td style="text-align: right;">0.6617119</td>
<td style="text-align: right;">315.9542</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A <a href="#fig-co2decomp">Figura&nbsp;<span>1.16</span></a> expõe o resultado da decomposição da série de emissões de CO2. Observa-se claramente a separação da tendência e do padrão sazonal da série, facilitando a interpretação desta.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-co2decomp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-co2decomp-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.16: Gráficos de decomposição da série de níveis de CO2 na atmosfera</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficos-de-previsão" class="level3" data-number="1.2.6">
<h3 data-number="1.2.6" class="anchored" data-anchor-id="gráficos-de-previsão"><span class="header-section-number">1.2.6</span> Gráficos de previsão</h3>
<p>A Figura <a href="ST4.html#fig-temp_pred_">Figura&nbsp;<span>4.16</span></a> exibe a série de temperatura instantânea na cidade de São joão del-Rei dos dias 15 a 28 de maio. Os dados foram obtidos em <a href="https://tempo.inmet.gov.br/TabelaEstacoes/A001">Instituto Nacional de Meteorologia</a>. Observa-se que a série plotada em cor preta exibe comportamento cíclico dado a variação diária entre a temperatura mínima, que varia de 8 a 13 ºC, e a máxima diárias, que gira em torno de 25 a 28 ºC no período. Também é possível observar uma tendência de aumento na temperatura nos dias considerados. A Figura expõe a previsão para dois dias à frente em azul, com intervalos de confiança de 80 a 90%.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-temp_pred_" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ST1_files/figure-html/fig-temp_pred_-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1.17: Previsão da temperatura em São João del-Rei</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="implementação-em-r" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="implementação-em-r"><span class="header-section-number">1.3</span> Implementação em R</h2>
<p>A seguir apresenta-se boa parte da implementação na linguagem R para obter os dados, gráficos e análises expostos no presente capítulo. Os dados utilizados estão disponíveis em <a href="https://github.com/robsonpro/Previsao">Previsão, por Robson Bruno Dutra Pereira</a>.</p>
<p>Carregando pacotes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rbcb)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fpp3)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série temporal do IPCA obtida usando o pacote <code>rbcb</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ipca <span class="ot">&lt;-</span> <span class="fu">get_series</span>(<span class="fu">c</span>(<span class="at">IPCA =</span> <span class="dv">433</span>), <span class="at">as =</span> <span class="st">"ts"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>ipca_ts <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(ipca, <span class="at">index =</span> index)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ipca_ts)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando a série.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ipca_ts <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(value) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"IPCA"</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">title=</span><span class="st">"IPCA no Brasil"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vizualizando a série a partir de 2020.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ipca_ts <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(index) <span class="sc">&gt;=</span> <span class="dv">2020</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(value) <span class="sc">+</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"IPCA"</span>, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"IPCA no Brasil a partir de 2020"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série de volume de produção de carros no Brasil.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>carros <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"vendas_veiculos.csv"</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sep=</span><span class="st">";"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>carros_ts <span class="ot">&lt;-</span> carros <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">as.Date</span>(data, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>data)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(carros_ts)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando a série.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>carros_ts <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(valor) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"Carros produzidos"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Produção de carros no Brasil"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série multivariada de produção de energia em 2023 no Brasil.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>energia_2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"BALANCO_ENERGIA_SUBSISTEMA_2023.csv"</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">header=</span>T, <span class="at">sep=</span><span class="st">";"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>energia_2023_ts <span class="ot">&lt;-</span> energia_2023 <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id_subsistena <span class="sc">==</span> <span class="st">"SIN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">tolower</span>(<span class="fu">gsub</span>(<span class="st">"val_ger"</span>, <span class="st">""</span>, .x))) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">din_instante =</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">as.POSIXct</span>(din_instante,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">format =</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> din_instante) <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(id_subsistena, nom_subsistema,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>            val_carga,val_intercambio)) <span class="sc">|&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">!</span>din_instante)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(energia_2023_ts)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando a série.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>energia_2023_ts <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(value, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">"Energia (MWh)"</span>, <span class="at">x=</span><span class="st">""</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Produção de energia no Brasil em 2023"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série de índices de produção de bens de consumo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>prod <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Producao_bens.csv"</span>,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">header=</span>T)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>prod<span class="sc">$</span>Data <span class="ot">&lt;-</span> <span class="fu">yearmonth</span>(<span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2002/1/1"</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">length=</span><span class="dv">271</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">by=</span><span class="st">"month"</span>))</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>prod <span class="ot">&lt;-</span> prod <span class="sc">|&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>capital<span class="sc">:</span>nao_duraveis)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>prod_ts <span class="ot">&lt;-</span> prod <span class="sc">|&gt;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">key=</span>name, <span class="at">index=</span>Data)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando em painéis separados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>prod_ts <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(value) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">nrow =</span> <span class="dv">4</span>, <span class="sc">~</span>name, <span class="at">scales=</span><span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour=</span><span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Correlação entre séries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df_prod <span class="ot">&lt;-</span> prod_ts <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>name,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from=</span>value)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(df_prod, <span class="at">columns =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série de emissão de CO2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"co2_mm_mlo.txt"</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">header=</span>T,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">skip=</span><span class="dv">41</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">sep=</span><span class="st">""</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span> co2[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(co2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"decimal.date"</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"monthly.averaged"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"de-season.alized"</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>co2<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(co2<span class="sc">$</span>year, co2<span class="sc">$</span>month, <span class="st">"01"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">sep=</span><span class="st">"-"</span>))</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>co2_ts <span class="ot">&lt;-</span> <span class="fu">tsibble</span>(<span class="at">Date =</span> co2<span class="sc">$</span>Date,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">CO2 =</span> co2<span class="sc">$</span>monthly.averaged,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">index =</span> Date)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando a série.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>co2_ts <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(CO2) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">"CO2 [PPM]"</span>, <span class="at">x=</span><span class="st">""</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Emissões de CO2"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Gráfico sazonal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>co2_ts <span class="ot">&lt;-</span> co2_ts <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(CO2))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>co2_ts <span class="ot">&lt;-</span> co2_ts <span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">index_by</span>(<span class="at">yearMonth =</span> <span class="fu">yearmonth</span>(Date)) <span class="sc">|&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CO2 =</span> <span class="fu">sum</span>(CO2, <span class="at">na.rm=</span>T))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>co2_ts <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_season</span>(CO2) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"CO2 [PPM]"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Gráfico sazonal: emissões de CO2"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Gráfico de subséries sazonais.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>co2_tsibble <span class="sc">|&gt;</span> <span class="fu">gg_subseries</span>(CO2) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y =</span> <span class="st">"CP2 [PPM]"</span>) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Gráfico de subséries sazonais: CO2"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="execícios-propostos" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="execícios-propostos"><span class="header-section-number">1.4</span> Execícios propostos</h2>
<ol type="1">
<li><p>Faça o gráfico da série temporal multivariada de produção de energia para o mês de dezembro de 2023.</p></li>
<li><p>Faça o gráfico anterior em painéis separados.</p></li>
<li><p>O código abaixo carrega os dados da série de visualização de vídeos do youtube. Obtenha o gráfico da série do vídeo 4.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tol <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"tolerancia_ajuste.csv"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>tol_tsibble <span class="ot">&lt;-</span> tol <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">as.Date</span>(Date, <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Date, <span class="at">key =</span> Video)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>tol4_tsibble <span class="ot">&lt;-</span> tol_tsibble <span class="sc">|&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Video <span class="sc">==</span> <span class="st">"#4"</span>, <span class="fu">year</span>(Date) <span class="sc">&gt;=</span> <span class="dv">2019</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">year</span>(Date)<span class="sc">&lt;</span><span class="dv">2024</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>O código abaixo acumula mensalmente as visualizações do vídeo 4. Obtenha os gráficos sazonais para a série mensal.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tol4_mensal <span class="ot">&lt;-</span> tol4_tsibble <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">index_by</span>(<span class="at">YearMonth =</span> <span class="fu">yearmonth</span>(Date)) <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Views =</span> <span class="fu">sum</span>(Views))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Prefácio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ST2.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Análise descritiva, métodos simples de previsão e diagnóstico</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>
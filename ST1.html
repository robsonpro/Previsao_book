<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robson Bruno Dutra Pereira">

<title>1&nbsp; Introdução e gráficos – Séries Temporais e Previsão</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ST2.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8da5b4427184b79ecddefad3d342027e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ST1.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e gráficos</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Séries Temporais e Previsão</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e gráficos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Análise descritiva, métodos simples de previsão e diagnóstico</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Decomposição de séries temporais</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Regressão de séries temporais</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Suavização exponencial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Modelos auto-regressivos integrados de médias móveis (ARIMA)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ST7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Regressão dinâmica</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#introdução-às-séries-temporais-e-previsão" id="toc-introdução-às-séries-temporais-e-previsão" class="nav-link active" data-scroll-target="#introdução-às-séries-temporais-e-previsão"><span class="header-section-number">1.1</span> Introdução às séries temporais e previsão</a></li>
  <li><a href="#exemplos-de-séries-e-visualizações" id="toc-exemplos-de-séries-e-visualizações" class="nav-link" data-scroll-target="#exemplos-de-séries-e-visualizações"><span class="header-section-number">1.2</span> Exemplos de séries e visualizações</a>
  <ul class="collapse">
  <li><a href="#séries-univariadas" id="toc-séries-univariadas" class="nav-link" data-scroll-target="#séries-univariadas"><span class="header-section-number">1.2.1</span> Séries univariadas</a></li>
  <li><a href="#séries-temporais-multivariadas" id="toc-séries-temporais-multivariadas" class="nav-link" data-scroll-target="#séries-temporais-multivariadas"><span class="header-section-number">1.2.2</span> Séries temporais multivariadas</a></li>
  <li><a href="#gráficos-de-sazonalidade" id="toc-gráficos-de-sazonalidade" class="nav-link" data-scroll-target="#gráficos-de-sazonalidade"><span class="header-section-number">1.2.3</span> Gráficos de sazonalidade</a></li>
  <li><a href="#correlação-entre-séries" id="toc-correlação-entre-séries" class="nav-link" data-scroll-target="#correlação-entre-séries"><span class="header-section-number">1.2.4</span> Correlação entre séries</a></li>
  <li><a href="#gráficos-de-decomposição" id="toc-gráficos-de-decomposição" class="nav-link" data-scroll-target="#gráficos-de-decomposição"><span class="header-section-number">1.2.5</span> Gráficos de decomposição</a></li>
  <li><a href="#gráficos-de-previsão" id="toc-gráficos-de-previsão" class="nav-link" data-scroll-target="#gráficos-de-previsão"><span class="header-section-number">1.2.6</span> Gráficos de previsão</a></li>
  </ul></li>
  <li><a href="#implementação-em-r" id="toc-implementação-em-r" class="nav-link" data-scroll-target="#implementação-em-r"><span class="header-section-number">1.3</span> Implementação em R</a></li>
  <li><a href="#execícios-propostos" id="toc-execícios-propostos" class="nav-link" data-scroll-target="#execícios-propostos"><span class="header-section-number">1.4</span> Execícios propostos</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e gráficos</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Robson Bruno Dutra Pereira </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introdução-às-séries-temporais-e-previsão" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="introdução-às-séries-temporais-e-previsão"><span class="header-section-number">1.1</span> Introdução às séries temporais e previsão</h2>
<p>Uma série temporal consiste em um conjunto de observações de uma variável aleatória ordenadas no tempo. Uma série temporal pode ser descrita matematicamente como <span class="math inline">\(y_1, ..., y_T\)</span>, onde <span class="math inline">\(T\)</span> consiste no último período da série. A análise de séries temporais visa o estudo e obtenção de modelos preditivos para este tipo de dados. O objetivo ao final é realizar previsões com o modelo obtido, de forma a viabilizar ações de planejamento, prever cenários e possibilidades.</p>
<p>A previsão é importante em diversos contextos das engenharias, administração e ciências. Por exemplo, para decidir o nível de produção e planejar o próximo período é necessário prever a demanda. Para avaliar se um investimento é viável é importante prever a sua rentabilidade. Para planejamento dos sistemas energéticos é importante prever o consumo de energia. Para prever a capacidade de produção de energia hidroelétrica é preciso prever a precipitação.</p>
<p>Neste curso serão apresentados diversos modelos para análise e previsão de séries temporais, sendo boa parte dos exemplos obtidos de casos brasileiros. Serão consideradas séries de dados de produção, indústria, agricultura, clima, energia, economia, investimentos, mobilidade, transporte, saúde, entre outros.</p>
</section>
<section id="exemplos-de-séries-e-visualizações" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="exemplos-de-séries-e-visualizações"><span class="header-section-number">1.2</span> Exemplos de séries e visualizações</h2>
<section id="séries-univariadas" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="séries-univariadas"><span class="header-section-number">1.2.1</span> Séries univariadas</h3>
<p>Na <a href="#fig-ipca1" class="quarto-xref">Figura&nbsp;<span>1.1</span></a> observa-se graficamente a série temporal do índice de preços ao consumidor (IPCA), com frequência mensal a partir de 1980. A série foi obtida em <a href="http://www.ipeadata.gov.br">Ipeadata</a>. As seis primeiras observações da série também são exibidas na <a href="#tbl-ipca" class="quarto-xref">Tabela&nbsp;<span>1.1</span></a>. A primeira observação é <span class="math inline">\(y_1 = 4,62\)</span>, ou seja, no primeiro mês de observação da série, fevereiro de 1980, o IPCA foi de 4,62%. Já a segunda observação é <span class="math inline">\(y_2 = 6,04\)</span> e assim sucessivamente, conforme disposição na Tabela. Observa-se graficamente a estabilização do índice a partir de 1994, a partir da adoção do plano real.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-ipca1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ipca1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-ipca1-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ipca1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.1: IPCA no Brasil
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div id="tbl-ipca" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ipca-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;1.1: IPCA no Brasil
</figcaption>
<div aria-describedby="tbl-ipca-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">data</th>
<th style="text-align: right;">ipca</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1980-02-01</td>
<td style="text-align: right;">4,62</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980-03-01</td>
<td style="text-align: right;">6,04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1980-04-01</td>
<td style="text-align: right;">5,29</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980-05-01</td>
<td style="text-align: right;">5,70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1980-06-01</td>
<td style="text-align: right;">5,31</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980-07-01</td>
<td style="text-align: right;">5,55</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Para visualizar melhor como o IPCA variou nos últimos 20 anos, pode-se selecionar os dados a partir do ano 2000. O resultado é plotado na <a href="#fig-ipca2" class="quarto-xref">Figura&nbsp;<span>1.2</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-ipca2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ipca2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-ipca2-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ipca2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.2: IPCA no Brasil a partir de 2000
</figcaption>
</figure>
</div>
</div>
</div>
<p>A <a href="#tbl-carros" class="quarto-xref">Tabela&nbsp;<span>1.2</span></a> exibe as primeiras observações da série temporal de volume de carros produzidos no Brasil a partir de 1990. A série foi obtida em <a href="https://anfavea.com.br/site/edicoes-em-excel/">dados estatísticos ANFAVEA</a> e apresenta frequência mensal.</p>
<div class="cell">
<div id="tbl-carros" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-carros-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;1.2: Produção de carros no Brasil
</figcaption>
<div aria-describedby="tbl-carros-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">data</th>
<th style="text-align: right;">quantidade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1990-02-01</td>
<td style="text-align: right;">57258</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990-03-01</td>
<td style="text-align: right;">32740</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1990-04-01</td>
<td style="text-align: right;">32812</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990-05-01</td>
<td style="text-align: right;">58464</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1990-06-01</td>
<td style="text-align: right;">37632</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990-07-01</td>
<td style="text-align: right;">43697</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>A série é plotada na <a href="#fig-carros" class="quarto-xref">Figura&nbsp;<span>1.3</span></a>. Pode-se observar alguns períodos de queda no volume, por exemplo, próximo de 2015 durante a crise política do país e em 2020 durante a pandemia, onde a demanda chegou a níveis anteriores aos dos anos 2000.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-carros" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-carros-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-carros-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-carros-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.3: Vendas de carros no Brasil
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="séries-temporais-multivariadas" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="séries-temporais-multivariadas"><span class="header-section-number">1.2.2</span> Séries temporais multivariadas</h3>
<p>A <a href="#fig-br040709" class="quarto-xref">Figura&nbsp;<span>1.4</span></a> expõe a série temporal com frequência horária do volume de ônibus e caminhões de dois eixos trafegando na Br040 no quilômetro 709 nos meses de agosto e setembro de 2025. São plotadas as séries no sentido crescente (C) e decrescente (D). A série está disponível em <a href="https://servicos.dnit.gov.br/dadospnct/mapa">dados do plano nacional de contagem de tráfego</a>. Observa-se padrões sazonais diário e semanal. O primeiro dia do mês de agosto de 2023 foi uma terça-feira. A partir da primeira hora do dia observa-se o crescimento do volume de veículo até um pico de tráfego próximo de 60 veículos com posterior decréscimo com o avançar da noite até um volume mínimo bem próximo de zero. O padrão diário se repete, porém, com menor volume nos fins de semana. O padrão semanal é identificado pela repetição de cinco ciclos de maior fluxo, caracterizando os dias de semana, e dois com menor fluxo, consistindo nos fins de semana.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-br040709" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-br040709-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-br040709-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-br040709-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.4: Tráfego de ônibus e caminhões de dois eixos na BR040 no quilômetro 709
</figcaption>
</figure>
</div>
</div>
</div>
<p>Na <a href="#tbl-energia1" class="quarto-xref">Tabela&nbsp;<span>1.3</span></a> são exibidas apenas as primeiras observações da série temporal em frequência horária de produção de energia eólica no ano de 2023 no Brasil. Os dados estão disponíveis em <a href="https://dados.ons.org.br/group/programacao-da-operacao">Dados abertos do operador nacional do sistema elétrico</a>.</p>
<div class="cell">
<div id="tbl-energia1" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-energia1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;1.3: Produção de energia no Brasil em 2023
</figcaption>
<div aria-describedby="tbl-energia1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">data</th>
<th style="text-align: left;">tipo</th>
<th style="text-align: right;">energia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2023-01-01 00:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">14138,75</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-01-01 01:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">13790,86</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-01-01 02:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">13612,57</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-01-01 03:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">13277,32</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-01-01 04:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">13009,72</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-01-01 05:00:00</td>
<td style="text-align: left;">eolica</td>
<td style="text-align: right;">12311,20</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>As séries temporais de energia eólica, hidráulica, solar e térmica são plotadas na <a href="#fig-energia1223" class="quarto-xref">Figura&nbsp;<span>1.5</span></a> para o mês de dezembro de 2023. De forma geral é possível ver o padrão cíclico diário de produção. Enquanto a energia solar é obviamente produzida durante os períodos de sol, a eólica tem maior volume de produção durante a noite e madrugada, quando venta mais forte. Já a energia elétrica, fonte dominante no Brasil, pode ser controlada para complementar as demais. A energia térmica, menos sustentável que as demais, é produzida em momentos de queda nos níveis de produção das demais fontes, justificando seu padrão menos previsível. A visualização em painéis separados é útil, uma vez que possibilita avaliar melhor o padrão e variabilidade de cada série, permitindo ajustar a escala de cada série de forma individual.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-energia1223" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-energia1223-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-energia1223-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-energia1223-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.5: Produção de energia no Brasil em dezembro de 2023
</figcaption>
</figure>
</div>
</div>
</div>
<p>Outro exemplo de série multivariada é a de índices de produção de bens de capital, de consumo duráveis, intermediários e de consumo não duráveis, plotada na <a href="ST4.html#fig-bem" class="quarto-xref">Figura&nbsp;<span>4.5</span></a> em um mesmo painel gráfico. A série foi obtida em <a href="https://www.ibge.gov.br/estatisticas/economicas/industria/9294-pesquisa-industrial-mensal-producao-fisica-brasil?=&amp;t=series-historicas">Pesquisa industrial mensal - produção física do IBGE</a>. Essa visualização em um úncio painel é interessante em casos onde as séries apresentam escala similar, possibilitando a comparação destas.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bem" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bem-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-bem-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bem-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.6: Bens de consumo duráveis, intermediários e de consumo não duráveis
</figcaption>
</figure>
</div>
</div>
</div>
<p>Um último exemplo de série temporal multivariada considera dados de visualizações de 4 vídeos da playlist Tolerâncias e ajustes do canal da engenharia de manufatura e qualidade. A série multivariada é plotada na <a href="#fig-tolaju" class="quarto-xref">Figura&nbsp;<span>1.7</span></a>. A série se inicia em 2018, ano de lançamento do canal, porém só tem dados segundo a data de lançamento de cada vídeo.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-tolaju" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tolaju-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-tolaju-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tolaju-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.7: Visualizações de vídeos de tolerâncias e ajustes no youtube
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficos-de-sazonalidade" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="gráficos-de-sazonalidade"><span class="header-section-number">1.2.3</span> Gráficos de sazonalidade</h3>
<p>É possível visualizar padrões sazonais de forma distintas. Sejam os dados de tráfego de veículos de passeio na BR040 no quilômetro 709. A Figura <a href="#fig-sazbr040day" class="quarto-xref">Figura&nbsp;<span>1.8</span></a> ilustra um gráfico de sazonalidade diária para o mês de agosto de 2023 para ambos sentidos de tráfego. Os dias são plotados em escala de cor, enquanto o horizonte diário em horas é plotado no eixo horizontal. Observa-se um tráfego mais baixo nas primeiras horas do dia, com aumento no volume de 3 às 9 da manhã, estabilidade durante a manhã e decréscimo com o início da noite. É possível observar também que para a maior parte dos dias o volume de tráfego nas horas mais movimentadas tem pico em 250 veículos. Porém há dias com volume maior.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-sazbr040day" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sazbr040day-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-sazbr040day-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sazbr040day-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.8: Sazonalidade diária no tráfego de veículos de passeio na BR040
</figcaption>
</figure>
</div>
</div>
</div>
<p>Para uma melhor visualização sejam os dias de semana separados em distintos painéis, conforme Figura <a href="#fig-sazbr040daysem" class="quarto-xref">Figura&nbsp;<span>1.9</span></a>. Observa-se agora mais claramente o padrão para cada dia de semana. Domingos são os dias mais movimentados considerando este tipo de veículo. De terça a quinta o tráfego apresenta padrão similar.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-sazbr040daysem" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sazbr040daysem-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-sazbr040daysem-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sazbr040daysem-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.9: Sazonalidade diária no tráfego na BR040, padrões de dias de semana
</figcaption>
</figure>
</div>
</div>
</div>
<p>Ainda considerando os dados de tráfego na BR-040 é possível visualizar a sazonalidade semanal. A <a href="#fig-sazbr040wk" class="quarto-xref">Figura&nbsp;<span>1.10</span></a> considera as semanas em cores e no eixo horizontal o horizonte semanal. Observa-se um padrão consistente para as distintas semanas do mês de Agosto.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-sazbr040wk" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sazbr040wk-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-sazbr040wk-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sazbr040wk-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.10: Sazonalidade diária no tráfego de veículos de passeio na BR040
</figcaption>
</figure>
</div>
</div>
</div>
<p>Tomando novamente os dados de visualizações de vídeos no youtube, pode-se visualizar os dados da série do vídeo 4 em subséries anuais, para avaliar se há sazonalidade. A <a href="#fig-saz4" class="quarto-xref">Figura&nbsp;<span>1.11</span></a> expõe o gráfico de sazonalidade. Os dados foram agregados mensalmente. O padrão cíclico não é tão claro, possivelmente devido a diferenças nos calendários de ensino entre os anos e também devido à pandemia de COVID-19. Pode-se visualizar os picos de visualizações de abril a junho e de Setembro a Novembro, coincidindo com períodos de picos de estudos nos dois semestres anuais.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-saz4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-saz4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-saz4-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-saz4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.11: Gráfico sazonal de Visualizações do vídeo 4
</figcaption>
</figure>
</div>
</div>
</div>
<p>Um gráfico de subsérie sazonal considera uma unidade de tempo em distintos painéis e um múltiplo desta unidade no eixo horizontal. A Figura <a href="#fig-sazcap" class="quarto-xref">Figura&nbsp;<span>1.12</span></a> plota tal gráfico para a série de índice de bens de capital. As linhas horizontais em azul consistem nas médias mensais, permitindo observar a variação ao longo do ano considerando tais médias. Já a subsérie observada em cada painel permitem observar a tendência ao longo dos anos dentro de cada mês. Para este índice, independente do mês observa-se um aumento na produção de bens de capital até 2013/2014, seguido de queda e posterior recuperação seguida de nova queda, provavelmente devido à pandemia de COVID-19.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-sazcap" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sazcap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-sazcap-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sazcap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.12: Gráfico de subséries sazonais: Visualizações do vídeo 4
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="correlação-entre-séries" class="level3" data-number="1.2.4">
<h3 data-number="1.2.4" class="anchored" data-anchor-id="correlação-entre-séries"><span class="header-section-number">1.2.4</span> Correlação entre séries</h3>
<p>A <a href="ST4.html#fig-bens_pairs" class="quarto-xref">Figura&nbsp;<span>4.6</span></a> exibe diagramas de dispersão e correlações aos pares para a série multivariada de produção de bens exposta na Figura <a href="ST4.html#fig-bem" class="quarto-xref">Figura&nbsp;<span>4.5</span></a>. Pode-se confirmar a alta relação linear entre tais índices, com correlação linear positiva variando de 0,70 a 0,84.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bens_pairs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bens_pairs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-bens_pairs-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bens_pairs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.13: Bens de consumo duráveis, intermediários e de consumo não duráveis
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficos-de-decomposição" class="level3" data-number="1.2.5">
<h3 data-number="1.2.5" class="anchored" data-anchor-id="gráficos-de-decomposição"><span class="header-section-number">1.2.5</span> Gráficos de decomposição</h3>
<p>Existem diversas formas de decompor séries temporais. A <a href="#tbl-capdecomp" class="quarto-xref">Tabela&nbsp;<span>1.4</span></a> expõe os resultados de uma decomposição aditiva usando o método STL para a série de produção de bens de capital. Tal método será explicado no capítulo 3. A componente cíclica é removida e o restante é suavizado para aproximar a tendência. O resíduo consiste na série original subtraída da tendência e da componente sazonal.</p>
<div class="cell">
<div id="tbl-capdecomp" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-capdecomp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;1.4: Decomposição da série de produção de bens de capital
</figcaption>
<div aria-describedby="tbl-capdecomp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Data</th>
<th style="text-align: right;">valor</th>
<th style="text-align: right;">trend</th>
<th style="text-align: right;">season_year</th>
<th style="text-align: right;">remainder</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2002 jan</td>
<td style="text-align: right;">58,19</td>
<td style="text-align: right;">66,25</td>
<td style="text-align: right;">-8,87</td>
<td style="text-align: right;">0,81</td>
</tr>
<tr class="even">
<td style="text-align: left;">2002 fev</td>
<td style="text-align: right;">56,75</td>
<td style="text-align: right;">65,93</td>
<td style="text-align: right;">-9,81</td>
<td style="text-align: right;">0,63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2002 mar</td>
<td style="text-align: right;">64,68</td>
<td style="text-align: right;">65,62</td>
<td style="text-align: right;">1,80</td>
<td style="text-align: right;">-2,74</td>
</tr>
<tr class="even">
<td style="text-align: left;">2002 abr</td>
<td style="text-align: right;">68,90</td>
<td style="text-align: right;">65,30</td>
<td style="text-align: right;">-2,54</td>
<td style="text-align: right;">6,14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2002 mai</td>
<td style="text-align: right;">66,66</td>
<td style="text-align: right;">65,02</td>
<td style="text-align: right;">1,92</td>
<td style="text-align: right;">-0,28</td>
</tr>
<tr class="even">
<td style="text-align: left;">2002 jun</td>
<td style="text-align: right;">61,72</td>
<td style="text-align: right;">64,74</td>
<td style="text-align: right;">-0,13</td>
<td style="text-align: right;">-2,90</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>A <a href="#fig-capdecomp" class="quarto-xref">Figura&nbsp;<span>1.14</span></a> expõe graficamente a decomposição da série do índice de produção de bens de capital. Observa-se claramente a separação da tendência e do padrão sazonal da série, facilitando a interpretação desta.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-capdecomp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-capdecomp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-capdecomp-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-capdecomp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.14: Gráficos de decomposição da série de produção de bens de capital
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficos-de-previsão" class="level3" data-number="1.2.6">
<h3 data-number="1.2.6" class="anchored" data-anchor-id="gráficos-de-previsão"><span class="header-section-number">1.2.6</span> Gráficos de previsão</h3>
<p>Um dos objetivos principais da análise e modelagem de séries temporais é a realização de previsões. Quando a série tem padrão não aleatório, com tendência e/ou sazonalidade, por exemplo, existem diversos métodos adequados para realizar modelagem e obter boas previsões. Obviamente quanto maior o horiznte de previsão almejado, maior a dificuldade de obter bons resultados.</p>
<p>A Figura <a href="ST4.html#fig-temp_pred_" class="quarto-xref">Figura&nbsp;<span>4.16</span></a> exibe a série de temperatura instantânea na cidade de São joão del-Rei dos dias 15 a 29 de maio. Os dados foram obtidos em <a href="https://tempo.inmet.gov.br/TabelaEstacoes/A001">Instituto Nacional de Meteorologia</a>. Observa-se que a série plotada em cor preta exibe comportamento cíclico dada a variação diária entre a temperatura mínima, que varia de 8 a 13 ºC, e a máxima diárias, que gira em torno de 25 a 28 ºC no período. Também é possível observar uma tendência de aumento na temperatura nos dias considerados. A Figura expõe a previsão para dois dias à frente em azul, com intervalos de confiança de 80 e 95%.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-temp_pred_" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-temp_pred_-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ST1_files/figure-html/fig-temp_pred_-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-temp_pred_-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1.15: Previsão da temperatura em São João del-Rei
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="implementação-em-r" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="implementação-em-r"><span class="header-section-number">1.3</span> Implementação em R</h2>
<p>A seguir apresenta-se boa parte da implementação na linguagem R para obter os dados, gráficos e análises expostos no presente capítulo. Os dados utilizados estão disponíveis em <a href="https://github.com/robsonpro/Previsao">Previsão, por Robson Bruno Dutra Pereira</a>.</p>
<p>Carregando pacotes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(feasts)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fable)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Leitura dos dados de IPCA. Os dados em extensão <code>*.csv</code> são inicialmente armazenados em um <code>data.frame</code> no R, com duas colunas, <code>data</code> e <code>ipca</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ipca <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"ipca.csv"</span>, <span class="at">header =</span> T)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>É necessário transformar o <code>data.frame</code> em um tipo de dados ideal para séries temporais. O tipo <code>tsibble</code> é adequado para a sintaxe que será usada neste curso. Antes, porém, é necessário transformar a coluna data em <code>Date</code>, de forma que o R entenda como tal, pois inicialmente a coluna com data como lida de um <code>*.csv</code> pode ser reconhecida como <code>character</code> ou como <code>numeric</code>, dependendo do formato desta coluna. O operador <code>|&gt;</code> é o operador <em>pipe</em> do R, o qual serve para encadear operações. O comando <code>mutate</code> é usado junto com o comando <code>as.Date</code> para mudar a coluna data para <code>Data</code>. É necessário entender como os dados estão armazenados para definir o argumento <code>format</code>, com a ordem adequada de entrada. O dia é identificado com <code>"%d"</code>, enquanto o mês numérico com <code>"%m"</code> ou mês character com <code>"%b"</code>, enquanto o dia é identificado com <code>"%d"</code>. Sugere-se usar <code>?as.Date</code> para mais detalhes e exemplos. O comando <code>as_tsibble</code> visa transformar o <code>data.frame</code> em <code>tsibble</code>, sendo que o argumento <code>index</code> deve receber uma coluna do tipo <code>Date</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ipca_ts <span class="ot">&lt;-</span> ipca <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(<span class="st">"01"</span>, data), <span class="at">format =</span> <span class="st">"%d %Y %b"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> data)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ipca_ts)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para visualizar a série pode-se usar o comando <code>autoplot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ipca_ts <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(ipca) <span class="sc">+</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"IPCA"</span>, <span class="at">x =</span> <span class="st">""</span>, <span class="at">title=</span><span class="st">"IPCA no Brasil"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vizualizando a série a partir de 2018, usando o comando <code>filter_index</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ipca_ts <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">"2018"</span> <span class="sc">~</span> .) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(year(data) &gt;= 2018) |&gt; # outra opcao</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(ipca) <span class="sc">+</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"IPCA"</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"IPCA no Brasil a partir de 2018"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série de volume de produção de carros no Brasil.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>carros <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"vendas_veiculos.csv"</span>, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sep=</span><span class="st">";"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>carros_ts <span class="ot">&lt;-</span> carros <span class="sc">|&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">as.Date</span>(data, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>data)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(carros_ts)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando a série.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>carros_ts <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(quantidade) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"Carros produzidos"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Produção de carros no Brasil"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série multivariada de produção de energia em 2023 no Brasil.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>energia_2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"energia_2023_sin.csv"</span>, <span class="at">header =</span> T)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># head(energia_2023) |&gt; gt()</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No caso de séries com frequência horária é importante usar o comando <code>as.POSIXct</code>, definindo também hora - <code>"%H"</code>, minuto - <code>"%M"</code>, e segundo - <code>"%S"</code>. Séries multivariadas podem ser alocadas em múltiplas colunas, como no caso da série em questão. Pode-se empilhar as séries com o comando <code>pivot_longer</code>, identificando corretamente o nome da coluna com as séries com o argumento <code>values_to</code> e o nome da coluna com a identificação das séries com o argumento <code>values_to</code>. Ao transformar em <code>tsibble</code> após empilhar as séries é importante identificar as séries com o argumento <code>key</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>energia_2023_ts <span class="ot">&lt;-</span> energia_2023 <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">as.POSIXct</span>(data, <span class="at">format =</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">!</span>data, <span class="at">names_to =</span> <span class="st">"tipo"</span>, <span class="at">values_to =</span> <span class="st">"energia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> data, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">key =</span> tipo)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>energia_2023_ts<span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando os dados de dezembro em painéis separados. Usa-se para tal o comando <code>facet_wrap</code> para plotar cada série em um painel gráfico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>energia_2023_ts <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">"2023-12"</span>) <span class="sc">|&gt;</span>   </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(energia) <span class="sc">+</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">nrow=</span><span class="dv">4</span>, <span class="sc">~</span> tipo, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Energia"</span>, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Produção de energia no Brasil em dezembro de 2023"</span>) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour=</span><span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Série de índices de produção de bens de consumo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>prod <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Producao_bens.csv"</span>, <span class="at">header=</span>T)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>prod<span class="sc">$</span>Data <span class="ot">&lt;-</span> <span class="fu">yearmonth</span>(<span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2002/1/1"</span>), </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">length=</span><span class="dv">271</span>, <span class="at">by=</span><span class="st">"month"</span>))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>prod <span class="ot">&lt;-</span> prod <span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> capital<span class="sc">:</span>nao_duraveis,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"indice"</span>, <span class="at">values_to =</span> <span class="st">"valor"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>prod_ts <span class="ot">&lt;-</span> prod <span class="sc">|&gt;</span> </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">key =</span> indice, <span class="at">index =</span> Data)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizando em um único gráfico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>prod_ts <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(valor)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Seja a série de fluxo de veículos na BR040 no quilômetro 709 no ano de 2023. A série apresenta frequência horária. O comando <code>dmy_h</code> pode ser usado para criar a data a partir das colunas de data e hora, após concatená-las com <code>paste</code>. Essa série é duplamente multivariada uma vez que apresenta dois sentidos e diversos tipos de veículos identificados de A a L. Porém, neste caso, será considera apenas a série de veículos de passeio (I) nos dois sentidos, crescente (C) e decrescente (D).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>br040_709 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"040_709_2023.csv"</span>, <span class="at">header =</span> T)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>br040_709_ts <span class="ot">&lt;-</span> br040_709 <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">datatempo =</span> <span class="fu">dmy_h</span>(<span class="fu">paste</span>(Data, Hora))) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Data, <span class="sc">-</span>Hora) <span class="sc">|&gt;</span>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> datatempo, </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">key =</span> Sentido)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O gráfico sazonal ´pode ser obtido com o comando <code>gg_season</code>. Para esta série é interessante visualizar tanto a sazonalidade diária, <code>period = "1d"</code>, quanto a semanal, <code>period = "1w"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>br040_709_ts <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">"2023-08"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(Sentido == "C") |&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill_gaps</span>() <span class="sc">|&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_season</span>(I, <span class="at">period =</span> <span class="st">"1d"</span>) <span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"hora"</span>, </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Veículos"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Sazonalidade diária no tráfego na BR040"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O Gráfico de subséries sazonais pode ser obtido com o comando <code>gg_subseries</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>prod_ts <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indice <span class="sc">==</span> <span class="st">"capital"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_subseries</span>(valor) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">""</span>, <span class="at">x=</span><span class="st">""</span>, <span class="at">title=</span><span class="st">""</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para avaliar a correlação entre séries os dados devem estar no fromato de <code>data.frame</code>. Logo, pode-se usar o comando <code>pivot_wider</code> para desempilhar as séries. Sugere-se usar o comando <code>ggpairs</code> que provê gráficos de dispersão aos apres entre as séries, gráficos de densidades amostrais individuais e o coeficiente de correlação de Pearson para todos os pares de séries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df_prod <span class="ot">&lt;-</span> prod_ts <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>indice,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from=</span>valor)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(df_prod, <span class="at">columns =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">progress =</span> F)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="execícios-propostos" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="execícios-propostos"><span class="header-section-number">1.4</span> Execícios propostos</h2>
<ol type="1">
<li>Faça o gráfico da série temporal multivariada de produção de energia para o mês de julho de 2023.</li>
</ol>
<ol start="2" type="1">
<li>Faça o gráfico anterior em painéis separados.</li>
</ol>
<ol start="3" type="1">
<li>O código abaixo carrega os dados da série de visualização de vídeos do youtube. <code>tol4_tsibble</code> consiste na série do vídeo 4. Obtenha o gráfico da série do vídeo 4.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tol <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"tolerancia_ajuste.csv"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>tol_ts <span class="ot">&lt;-</span> tol <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">as.Date</span>(Date, <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Date, <span class="at">key =</span> Video)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>tol4_ts <span class="ot">&lt;-</span> tol_ts <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Video <span class="sc">==</span> <span class="st">"#4"</span>, <span class="fu">year</span>(Date) <span class="sc">&gt;=</span> <span class="dv">2019</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">year</span>(Date)<span class="sc">&lt;</span><span class="dv">2024</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>O código abaixo acumula mensalmente as visualizações do vídeo 4. Obtenha os gráficos sazonais para a série mensal. Defina <code>labels = "left"</code> e <code>labels_repel = T</code> para identificar os anos próximos às linhas.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tol4_mensal <span class="ot">&lt;-</span> tol4_ts <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">index_by</span>(<span class="at">YearMonth =</span> <span class="fu">yearmonth</span>(Date)) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Views =</span> <span class="fu">sum</span>(Views))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>O código a seguir carrega a série de temperatura horária de São João del-Rei para 2024. Considerando os dados de 14 dias faça o gráfico de sazonalidade diária e interprete-o.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tempo_sjdr <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"sjdr2024.csv"</span>,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">header=</span>T)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>tempo_sjdr_ts <span class="ot">&lt;-</span> tempo_sjdr <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Data =</span> <span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(Data,Hora), </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">format =</span> <span class="st">"%Y/%m/%d %H"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Hora) <span class="sc">|&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Data)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>tempo_sjdr_14_dias <span class="ot">&lt;-</span> tempo_sjdr_ts <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">"2024-06-15 00:00:00"</span> <span class="sc">~</span> <span class="st">"2024-06-2923:00:00"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Prefácio">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Prefácio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ST2.html" class="pagination-link" aria-label="Análise descritiva, métodos simples de previsão e diagnóstico">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Análise descritiva, métodos simples de previsão e diagnóstico</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>
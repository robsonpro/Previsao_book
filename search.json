[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Séries Temporais e Previsão",
    "section": "",
    "text": "Prefácio\nApostila de séries temporais.\nEsta apostila é baseada no excelente livro de Hyndman (2018), disponível em OTexts.com/fpp3.\nEntretanto, não foram considerados os mesmos exemplos. Os dados para os exemplos e exercícios propostos foram coletados a partir principalmente de bases de dados brasileiras.\nRobson Bruno Dutra Pereira\n\n\n\n\nHyndman, RJ. 2018. Forecasting: Principles and Practice. OTexts."
  },
  {
    "objectID": "ST1.html#introdução-à-disciplina-séries-temporais",
    "href": "ST1.html#introdução-à-disciplina-séries-temporais",
    "title": "1  Séries Temporais - Introdução e gráficos",
    "section": "1.1 Introdução à disciplina Séries Temporais",
    "text": "1.1 Introdução à disciplina Séries Temporais\nUma série temporal consiste em um conjunto de observações de uma variável aleatória ordenada no tempo. A Análise de Séries temporais visa o estudo e obtenção de modelos preditivos para este tipo de dados. O objetivo ao final é realizar previsões com o modelo obtido, de forma a viabilizar ações de planejamento necessárias.\nA previsão é importante em diversos contextos das engenharias, administração e ciências. Por exemplo, para decidir o nível de produção e planejar o próximo período é importante prever a demanda. Para avaliar se um investimento é viável é importante prever a sua rentabilidade. Para planejamento dos sistemas energéticos é importante prever o consumo de energia. Para prever a capacidade de produção de energia hidroelétrica é preciso prever a precipitação.\n\n1.1.1 Exemplos de séries e visualizações\nA seguir observa-se graficamente a série temporal do índice de preços ao consumidor (IPCA), com frequência mensal a partir de 1980. A série foi obtida em http://www.ipeadata.gov.br. As primeiras observações da série também são exibidas. Observa-se claramente como a inflação no país foi controlada a partir da adoção do plano real.\n\n\n\n\n\n\n  \n    \n      index\n      value\n    \n  \n  \n    1980 Feb\n4.62\n    1980 Mar\n6.04\n    1980 Apr\n5.29\n    1980 May\n5.70\n    1980 Jun\n5.31\n    1980 Jul\n5.55\n  \n  \n  \n\n\n\n\n\n\n\n\n\nPara visualizar melhor como o IPCA variou nos últimos anos, pode-se selecionar os dados a partir do ano 2000.\n\n\n\n\n\nA seguir apresentam-se as primeiras observações da série temporal de volume de carros produzidos no Brasil a partir de 1990. A série foi obtida em https://anfavea.com.br/site/edicoes-em-excel/ e apresenta frequência mensal.\n\n\n\n\n\n\n  \n    \n      data\n      valor\n    \n  \n  \n    1990-02-01\n57258\n    1990-03-01\n32740\n    1990-04-01\n32812\n    1990-05-01\n58464\n    1990-06-01\n37632\n    1990-07-01\n43697\n  \n  \n  \n\n\n\n\nA série é plotada à seguir. Pode-se observar alguns períodos de queda no volume, por exemplo, próximo de 2015 durante a crise política do país e em 2020 durante a pandemia, onde a produção chegou a níveis anteriores aos dos anos 2000.\n\n\n\n\n\nUma série temporal multivariada de produção de milho, mandioca e batata no Brasil é observada à seguir. Os valores são observados de 3 em 3 anos, https://www.fao.org/faostat/en/#data/QCL. Observa-se que a série de milho apresenta um padrão linear até 2005 e depois outro padrão linear porém, com maior inclinação, destacando-se em relação às outras séries. A produção de mandioca apresenta cíclico irregular com tendência de queda.\n\n\n\n\n\n\n  \n    \n      Item\n      Year\n      Value\n    \n  \n  \n    mandioca\n1963\n22248640\n    mandioca\n1966\n24710048\n    mandioca\n1969\n30073936\n    mandioca\n1972\n29828912\n    mandioca\n1975\n26117616\n    mandioca\n1978\n25459408\n  \n  \n  \n\n\n\n\n\n\n\n\n\nA série de produção de batata é plotada individualmente à seguir. Devido a grande diferença em relação aos níveis de produção de milho, aparentemente parecia próxima de estacionária, porém ao plotar individualmente, observa-se uma tendência linear no aumento de produção deste item.\n\n\n\n\n\nUm exemplo de série temporal multivariada é observada a seguir considerando dados de visualizaçoes de 4 vídeos da playlist Tolerâncias e ajustes do Canal da engenharia de manufatura e qualidade. A série inicia em 2018, ano de início do canal, porém só tem dados segundo a data de lançamento de cada vídeo. A seguir são observadas algumas linhas da série.\n\n\n\n\n\n\n  \n    \n      Date\n      Views\n      Video\n    \n  \n  \n    2018-02-19\n0\n#1\n    2018-02-20\n0\n#1\n    2018-02-21\n0\n#1\n    2018-02-22\n0\n#1\n    2018-02-23\n0\n#1\n    2018-02-24\n0\n#1\n  \n  \n  \n\n\n\n\nEm seguida a série multivariada é plotada.\n\n\n\n\n\nTomando a série do vídeo 4 plotado a partir de setembro de 2018.\n\n\n\n\n\nPode-se visualizar os dados desta série em subséries anuais, de forma a ver a sazonalidade presente nos dados. Pode-se visualizar os picos de visualizações em Abril e Outubro coincidindo com períodos de picos de estudos nos primeiro segundo semestres anuais.\n\n\n\n\n\nPode-se plotar o gráfico sazonal visualizando a variação anual dentro de cada mês.\n\n\n\n\n\nA seguir são observados dados de produção de quatro tipos de energia para o ano de 2023 no Brasil. Os dados são fornecidos em frequência horária e estão disponíveis em https://dados.ons.org.br/group/programacao-da-operacao.\nA série temporal multivariada é plotada a seguir. Pode-se observar o aumento na produção das fontes complementares quando a hidráulica apresentou declínio no período mais seco do ano.\n\n\n\n\n\n\n  \n    \n      din_instante\n      name\n      value\n    \n  \n  \n    2023-01-01\nhidraulica\n39057.309\n    2023-01-01\ntermica\n5698.335\n    2023-01-01\neolica\n14138.750\n    2023-01-01\nsolar\n21.155\n    2023-01-01 01:00:00\nhidraulica\n39624.650\n    2023-01-01 01:00:00\ntermica\n5727.550\n  \n  \n  \n\n\n\n\n\n\n\n\n\nA série temporal multivariada é plotada em múltiplos painéis a seguir.\n\n\n\n\n\nEm algumas situações é importante agregar os dados de forma a facilitar a interpretação. A seguir plota-se a mesma série agregada diariamente. Fica mais fácil notar a correlação negativa entre a série hidráulica e as demais.\n\n\n\n\n\nPode-se visualizar a correlação aos pares entre os diferentes tipos de energia considerados.\n\n\n\n\n\nPara uma interpretação ainda mais fácil realiza-se uma última agregação a nível mensal.\n\n\n\n\n\nObserva-se que a correlação considerando a frequência mensal fica muito mais clara.\n\n\n\n\n\nA seguir apresenta-se a série temporal de níveis de CO2 na atmosfera medida no Observatório Mauna Loa, Havaí, desde 1958, https://climate.nasa.gov/vital-signs/carbon-dioxide. Observa-se um padrão de crescimento não linear com ciclos sazonais bem definidos.\n\n\n\n\n\nA seguir apenas os últimos 4 anos são plotados. Pode-se observar que os períodos sazonais de pico coincidem com o início da primavera no hemisfério norte, enquanto os vales são observados no período de crescimento das plantas, as quais capturam parte significativa do CO2 da atmosfera.\n\n\n\n\n\nO gráfico sazonal também pode ser útil neste caso.\n\n\n\n\n\nExistem diversas formas de decompor séries temporais. A seguir é observada uma decomposição aditiva sazonal da série CO2. A componente cíclica é removida e o restante é suavizado para encontrar uma tendência. O resíduo consiste na diferença entre a série original e a soma da tendência e da componente sazonal.\n\n\n\n\n\n\n  \n    \n      CO2\n      trend\n      season_year\n      remainder\n      season_adjust\n    \n  \n  \n    315.71\n314.9477\n1.0263767\n-0.2640423\n314.6836\n    317.45\n315.0187\n2.2221543\n0.2091377\n315.2278\n    317.51\n315.0898\n2.7703197\n-0.3500701\n314.7397\n    317.27\n315.1608\n2.2787986\n-0.1695914\n314.9912\n    315.87\n315.2266\n0.8557299\n-0.2123500\n315.0143\n    314.93\n315.2924\n-1.0241591\n0.6617119\n315.9542"
  },
  {
    "objectID": "ST1.html#referências",
    "href": "ST1.html#referências",
    "title": "1  Séries Temporais - Introdução e gráficos",
    "section": "1.2 Referências",
    "text": "1.2 Referências\nHyndman, R.J., & Athanasopoulos, G. (2021) Forecasting: principles and practice, 3rd edition, OTexts: Melbourne, Australia. OTexts.com/fpp3. Accessed on 01/10/2024."
  },
  {
    "objectID": "ST2.html#estatísiticas-descritivas",
    "href": "ST2.html#estatísiticas-descritivas",
    "title": "2  Análise descritiva, métodos simples de previsão e diagnóstico",
    "section": "2.1 Estatísiticas descritivas",
    "text": "2.1 Estatísiticas descritivas\n\n2.1.1 Estatísticas simples\nAlgumas estatítiscas descritivas podem ser úteis para uma avaliação inicial de séries temporais.\nA Table 2.1 expõe a média e o desvio-padrão para a série multivariada de energia produzida em MWh no Brasil em 2023, segundo cada fonte. Observa-se a superioridade da série hidráulica em relação às demais, confirmando a dependência desta fonte na matriz energética brasileira.\n\n\n\n\nTable 2.1: Média e desvio-padrão da série multivariada de Energia\n\n\nname\nmean\nsd\n\n\n\n\nsolar\n4909.736\n6929.487\n\n\ntermica\n8250.471\n1886.645\n\n\neolica\n10887.856\n3931.696\n\n\nhidraulica\n50466.854\n11061.858\n\n\n\n\n\n\nA (bl-quatis?) expõe os quartis da mesma série para todas as fontes consideradas. Recordando, os quartis são valores na série que dividem os dados em quatro partes iguais. O primeiro deixa 25% das observações abaixo, o segundo ou a mediana deixa 50% das observações abaixo, enquanto o terceiro e último deixa 75% dos dados abaixo. Observa-se também o mínimo (0%) e máximo (100%) de cada série.\n\n\n\n\nTable 2.2: Média e desvio-padrão da série multivariada de Energia\n\n\nname\n0%\n25%\n50%\n75%\n100%\n\n\n\n\neolica\n692.913\n7975.784\n11133.851\n13983.090\n20166.24\n\n\nhidraulica\n23565.749\n41825.293\n50623.416\n58907.708\n81006.77\n\n\nsolar\n0.237\n4.913\n588.847\n7368.716\n27222.57\n\n\ntermica\n4415.886\n6868.407\n8269.444\n9438.016\n19248.15\n\n\n\n\n\n\n\n\n2.1.2 Autocorrelação\nA autocorrelação é uma estatística importante para avaliar séries temporais. Para avaliar a autocorrelação, deve-se defasar a série e testar a correlação da série original com a série defasada. Para uma defasagem (lag) de uma observação, \\(k= 1\\), calcula-se a correlação \\(r_1\\) entre \\(y_t\\) e \\(y_{t-1}\\). Para uma defasagem de duas observações, \\(k= 2\\), calcula-se a correlação \\(r_2\\) entre \\(y_t\\) e \\(y_{t-2}\\) e assim sucessivamente.\n\\[\nr_k = \\frac{\\sum_{t=k+1}^T (y_t-\\bar{y})(y_{t-k}-\\bar{y})}{\\sum_{t=1}^T (y_t-\\bar{y})^2}\n\\]\nO correlograma consiste no gráfico que plota tais autocorrelações. A Figura Figure 2.1 plota o correlograma da série de níveis de CO2 a partir de 2000.\n\n\n\n\n\nFigure 2.1: Correlograma da série de níveis de CO2\n\n\n\n\nSéries com tendência geralmente apresentam correlações mais altas nas defasagens menores, uma vez que os valores adjacentes na série são próximos. Séries com sazonalidade apresentam autocorrelação alta no período sazonal. Para o caso plotado, pode-se confirmar a presença de tendência e de autocorrelação anual na série.\nA Table 2.3 apresenta algumas estatísticas relacionadas à autocorrelação: o primeiro coeficiente de autocorrelação, \\(r_1\\); a soma dos quadrados dos primeiros 10 coeficientes de autocorrelação, \\(\\sum_{k=1}^{10}r_i^2\\); o primeiro coeficiente de correlação da série diferenciada; a soma dos quadrados dos primeiros 10 coeficientes da série diferenciada; o primeiro coeficiente de correlação da série diferenciada com defasagem de duas observações; a soma dos quadrados dos primeiros 10 coeficientes da série diferenciada de duas observações; e o coeficiente de autocorrelação do primeiro lag sazonal, caso a série tenha sazonalidade.\n\n\n\n\nTable 2.3: Estatísticas relacionadas à autocorrelação\n\n\n\n\n\n\n\n\n\n\n\nacf1\nacf10\ndiff1_acf1\ndiff1_acf10\ndiff2_acf1\ndiff2_acf10\nseason_acf1\n\n\n\n\n0.9875842\n8.525252\n0.6864063\n1.768986\n0.2458201\n0.5501127\n0.8778667\n\n\n\n\n\n\nNa Figure 2.2 plotados algumas séries temporais e abaixo o correlograma correspondente. A série da Figure 2.2(a) corresponde a um ruído branco ou uma sequência de números aleatórios seguindo a distribuição normal. Tal série não apresenta autocorrelação significativa, conforme indica o seu correlograma na Figure 2.2(d). A série da Figure 2.2(b) apresenta padrão cíclico com sazonalidade de 24h, conforme correlograma da Figure 2.2(e). Já a série da Figure 2.2(c) apresenta tendência linear positiva clara com sazonalidade anual, conforme correlograma da Figure 2.2(f).\n\n\n\n\n\nFigure 2.2: Séries e respectivos correlogramas"
  },
  {
    "objectID": "ST2.html#métodos-simples-de-previsão",
    "href": "ST2.html#métodos-simples-de-previsão",
    "title": "2  Análise descritiva, métodos simples de previsão e diagnóstico",
    "section": "2.2 Métodos simples de previsão",
    "text": "2.2 Métodos simples de previsão\n\n2.2.1 Média\nSeja a série histórica \\(y_1, ..., y_T\\). A média pode ser aplicada para previsão de séries temporais, de forma que uma ou mais observações futuras são previstas a partir da média das \\(T\\) observações disponíveis da série.\n\\[\n\\hat{y}_{T+h|T}=\\frac{1}{T}\\sum_{t=1}^Ty_t=\\frac{y_1+y_2+...+y_T}{T}\n\\]\nNa Figure 2.3 expõe-se a previsão com a média para três dias à frente na série temporal de produção de carros no Brasil.\n\n\n\n\n\nFigure 2.3: Previsão por média na série de produção de carros no Brasil\n\n\n\n\n\n\n2.2.2 Método ingênuo\nO método ingênuo propõe prever as observções futuras como a última observação.\n\\[\n\\hat{y}_{T+h|T}=y_T\n\\]\nNa Figure 2.4 expõe-se a previsão com o método ingênuo para três dias à frente na série temporal de produção de carros no Brasil.\n\n\n\n\n\nFigure 2.4: Previsão por média na série de produção de carros no Brasil\n\n\n\n\n\n\n2.2.3 Ingênuo sazonal\nO método ingênuo sazonal é indicado para séries muito sazonais e propõe prever as observações futuras iguais aos períodos das estações anteriores, por exemplo mesmo valor do mês do ano anterior. Na formulação dos valores preditos a seguir, \\(m\\) consiste no período sazonal e \\(k\\) é a parte inteira de \\((h-1)/m\\), ou seja, o número completo de anos do período de previsão antes de \\(T+h\\).\n\\[\n\\hat{y}_{T+h|T}=y_{T+h-m(k+1)}\n\\]\nNa Figure 2.5 expõe-se a previsão com o método ingênuo sazonal para três dias à frente na série temporal de produção de carros no Brasil.\n\n\n\n\n\nFigure 2.5: Previsão por média na série de produção de carros no Brasil\n\n\n\n\nA Figure 2.6 apresenta um conjunto de dados de temperatura instantânea coletada de hora em hora das duas primeiras semanas de Maio de 2024 para a cidade de São joão del-Rei. Os dados foram obtidos em https://tempo.inmet.gov.br/TabelaEstacoes/A001. Foram considerados os dados da primeira semana para treinar os modelos, sendo as previsões plotadas para a semana seguinte juntamente com os dados. Pode-se observar que as previsões obtidas com o método ingênuo sazonal apresentam bom ajuste aos dados.\n\n\n\n\n\nFigure 2.6: Previsão da temperatura em São João del-Rei em Maio de 2024 pelos três métodos benchmarking apresentados\n\n\n\n\n\n\n2.2.4 Deriva\nO método da deriva é uma variação do ingênuo que permite a previsão de observações com tendência de crescimento ou decréscimo segundo a deriva observada entre a primeira e última observação.\n\\[\n\\hat{y}_{T+h|T} = y_T + \\frac{h}{T-1}\\sum_{t=2}^T(y_t-y_{t-1}) =y_T+h \\bigg(\\frac{y_T-y_1}{T-1}\\bigg)\n\\]\nNa Figure 2.7 aplica-se a previsão com o método da deriva para três dias à frente na série temporal de produção de carros no Brasil.\n\n\n\n\n\nFigure 2.7: Previsão por deriva na série de produção de carros no Brasil\n\n\n\n\n\n\n2.2.5 Resíduos e valores previstos\nOs valores previstos são denotados por \\(\\hat{y}_{t|t-1}\\), implicando que a previsão de \\(\\hat{y}_{t}\\) é baseada nas observações \\(y_1, ..., y_{t-1}\\).\nOs resíduos de uma série temporal consistem nos valores do erro, sendo calculados como a diferença entre o observado e o previsto em cada instante de tempo, \\(e_t=y_t-\\hat{y}_t\\).\nNa Table 2.4 são observados os valores previstos (.fitted) e os resíduos (.resid) para as previsões obtidas com o método Ingênuo sazonal para o último exemplo para as últimas observações.\n\n\n\n\nTable 2.4: Valores previstos e residuais obtidos pelo método ingênuo para a série de produção de carros\n\n\nData\nTemp\n.fitted\n.resid\n\n\n\n\n2024-05-07 18:00:00\n27.8\n26.4\n1.4\n\n\n2024-05-07 19:00:00\n27.9\n25.6\n2.3\n\n\n2024-05-07 20:00:00\n25.8\n24.1\n1.7\n\n\n2024-05-07 21:00:00\n23.0\n22.4\n0.6\n\n\n2024-05-07 22:00:00\n20.3\n21.8\n-1.5\n\n\n2024-05-07 23:00:00\n18.8\n20.7\n-1.9\n\n\n\n\n\n\n\n\n2.2.6 Diagnósticos dos resíduos\nOs resíduos de um modelo de séries temporais devem ser:\n\nNão correlacionados.\nCom média nula.\n\nSe os resíduos forem correlacionados eles apresentaram informações que deveriam ser incorporadas ao modelo, de forma a melhorar as previsões. Se os resíduos apresentam média diferente de zero, o modelo apresenta um viés. O viés pode ser corrigido subtraindo-o das previsões. Já a autocorrelação entre os resíduos tem correção mais trabalhosa, sendo este tema tratado posteriormente.\nÉ interessante, porém não-obrigatório, que os resíduos sejam:\n\nHomocedasticos.\nNormalmente distribuídos.\n\nA homocedasticidade consiste na igualdade de variâncias. Séries com resíduos heterocedásticos podem ser tranformadas, visando obter homocedasticidade e normalidade.\nNa Figure 2.8 é plotada a série histórica de 187 observações do índice Ibovespa, https://www.infomoney.com.br/cotacoes/b3/indice/ibovespa/historico/.\n\n\n\n\n\nFigure 2.8: Série do índice Ibovespa\n\n\n\n\nA previsão de índices da bolsa é geralmente feita com bom resultado usando o método Ingênuo. Neste caso os resíduos serão calculados como a diferença da observação atual e anterior, \\(e_t = y_t - \\hat{y}_t = y_t - y_{t-1}\\). Na Figure 2.9 são plotados os resíduos. De forma geral estão aparentam apresentar boa distribuição, sem assimetrias e tendência.\n\n\n\n\n\nFigure 2.9: Resíduos da série do índice Ibovespa para o método ingênuo\n\n\n\n\nNa Figure 2.10 é plotado o histograma dos resíduos, o qual aparenta adequar-se bem à distribuição normal.\n\n\n\n\n\nFigure 2.10: Histograma dos resíduos da série do índice Ibovespa\n\n\n\n\nNa Figure 2.11 observa-se o correlograma da série do índice Ibovespa. Pode-se observar que a série é altamente autocorrelacionada considerando defasagem de até 22 observações.\n\n\n\n\n\nFigure 2.11: Correlograma da série do índice Ibovespa\n\n\n\n\nEm sequência na Figure 2.12 plota-se o correlograma dos resíduos. Pode-se observar que o método Ingênuo resultou em resíduos não correlacionados, de forma que o modelo considera toda a informação disponível nos dados. Obviamente podem haver modelos melhores que também garantam a ausência de autocorrelação residual.\n\n\n\n\n\nFigure 2.12: Correlograma dos resíduos da série do índice Ibovespa\n\n\n\n\n\n\n2.2.7 Testes para diagnóstico de autocorrelação\nUm teste portmanteau é um teste para averiguar se as \\(l\\) primeiras autocorrelações são diferentes do que se esperaria para um ruído branco. Um destes testes seria o de Box-Pierce, com estatística calculada conforme segue. Sugere-se \\(l=10\\) autocorrelações para séries não sazonais e \\(l=2m\\) para casos sazonais, com \\(m\\) sendo o período sazonal. Porém, o teste não é adequado para \\(l\\) auto, sugerindo-se no máximo \\(l=T/5\\).\n\\[\nQ = T\\sum_{k=1}^l r_k^2\n\\]\nUm teste mais adequado é o de Ljung-Box, com estatística calculada conforme segue.\n\\[\nQ^* = T(T+2)\\sum_{k=1}^l (T-k)^{-1}r_k^2\n\\]\nEm ambos os casos um alto valor de \\(Q^*\\) (ou \\(Q\\)) sugere que as autocorrelações não vem de um ruído branco. Para decisão, considera-se que \\(Q^*\\) (ou \\(Q\\)) segue a distribuição \\(\\chi^2\\) com \\(l\\) graus de liberdade.\nNa ?tbl-testes expõe-se o valor \\(Q\\) e \\(Q^*\\) para os resíduos do modelo Ingênuo para os dados do índice Ibovespa. Pode-se concluir que, para ambas os testes, as autocorrelações dos resíduos não diferem das de uma série ruído branco.\n\n\nValores das estatísticas Q e Q* para os resíduos do método ingênuo para o índice Ibovespa\n\n\n\n\n\n\n.model\nbp_stat\nbp_pvalue\n\n\n\n\nNAIVE(FECHAMENTO)\n9.180843\n0.5150314\n\n\n\n\n\n\n\n\n\n\n.model\nlb_stat\nlb_pvalue\n\n\n\n\nNAIVE(FECHAMENTO)\n9.508178\n0.4846474\n\n\n\n\n\n\nO método da deriva é um pouco mais adequado que o Ingênuo para séries de índices de bolsas de valores. Na ?tbl-testes2 são exibidos os resultados dos testes de Box-Pierce e de Ljung-Box para as autocorrelações residuais de tal método.\n\n\nValores das estatísticas Q e Q* para os resíduos do método da deriva para o índice Ibovespa\n\n\n\n\n\n\n.model\nbp_stat\nbp_pvalue\n\n\n\n\nRW(FECHAMENTO ~ drift())\n9.180843\n0.5150314\n\n\n\n\n\n\n\n\n\n\n.model\nlb_stat\nlb_pvalue\n\n\n\n\nRW(FECHAMENTO ~ drift())\n9.508178\n0.4846474"
  },
  {
    "objectID": "ST2.html#intervalos-de-confiança-para-previsão",
    "href": "ST2.html#intervalos-de-confiança-para-previsão",
    "title": "2  Análise descritiva, métodos simples de previsão e diagnóstico",
    "section": "2.3 Intervalos de confiança para previsão",
    "text": "2.3 Intervalos de confiança para previsão\nAo se realizar previsões com séries temporais, considera-se um intervalo de confiança para a previsão com nível de probabilidade ou confiança de interesse. Para por exemplo um intervalo de previsão de 95% os valores obtidos consistem nos limites que garantem que o valor previsto está entre eles com 95% de confiança.\nUm intervalo de previsão para \\(h\\) passos à frente com 95% de confianca pode ser calculado conforme segue.\n\\[\n\\hat{y}_{T+h|T} \\pm1,96 \\hat\\sigma_h,\n\\]\nonde \\(1,96\\) consiste no valor do quantil na distribuição normal-padrão \\(z\\), com 0,95 de probabilidade ou confiança. Obviamente, caso deseje-se um intervalo com nível de confiança diferente, deve-se selecionar o valor \\(z\\) adequado.\nO desvio-padrão para previsões com \\(h=1\\) (um passo a frente) pode ser calculado como o desvio-padrão dos resíduos, onde \\(K\\) é o número de parâmetros do modelo e \\(M\\) o número de valores ausentes nos resíduos (para o método ingênuo e o da deriva, por exemplo, \\(M=1\\), uma vez que a primeira observação não pode ser estimada).\n\\[\n\\hat\\sigma = \\sqrt{\\frac{1}{T-K-M}\\sum_{t=1}^T e_t^2}\n\\]\nPara previsões com \\(h&gt;1\\) a estimativa de \\(\\sigma_h\\) é mais complexa. A @ Table 2.5 expõe as Equações para estimar o desvio-padrão para os métodos benchmarking até aqui expostos, onde \\(m\\) é o período sazonal e \\(k\\) consiste na parte inteira de \\((h−1)/m\\).\n\n\nTable 2.5: My Caption\n\n\nMétodo\ndesvio-padrão para \\(h\\) previsões\n\n\n\n\nMédia\n\\(\\hat\\sigma_h = \\hat\\sigma\\sqrt{1+1/T}\\)\n\n\nIngênuo\n\\(\\hat\\sigma_h = \\hat\\sigma\\sqrt{h}\\)\n\n\nIngênuo sazonal\n\\(\\hat\\sigma_h = \\hat\\sigma\\sqrt{k+1}\\)\n\n\nDeriva\n\\(\\hat\\sigma_h = \\hat\\sigma\\sqrt{h(1+h/(T-1))}\\)\n\n\n\n\nNa Table 2.6 são apresentados os intervalos de confiança de 80 e 95% para \\(h=10\\) períodos para o índice Ibovespa.\n\n\n\n\nTable 2.6: Intervalo de previsão para a série do índice Ibovespa\n\n\n\n\n\n\n\n\n\n\n.model\nDATA\nFECHAMENTO\n.mean\n80%\n95%\n\n\n\n\nRW(FECHAMENTO ~ drift())\n188\nN(133, 0.91)\n132.7030\n[131.4798, 133.9262]80\n[130.8322, 134.5737]95\n\n\nRW(FECHAMENTO ~ drift())\n189\nN(133, 1.8)\n132.7089\n[130.9744, 134.4435]80\n[130.0562, 135.3616]95\n\n\nRW(FECHAMENTO ~ drift())\n190\nN(133, 2.8)\n132.7149\n[130.5849, 134.8449]80\n[129.4574, 135.9724]95\n\n\nRW(FECHAMENTO ~ drift())\n191\nN(133, 3.7)\n132.7209\n[130.2549, 135.1869]80\n[128.9495, 136.4923]95\n\n\nRW(FECHAMENTO ~ drift())\n192\nN(133, 4.7)\n132.7269\n[129.9626, 135.4912]80\n[128.4992, 136.9545]95\n\n\nRW(FECHAMENTO ~ drift())\n193\nN(133, 5.6)\n132.7328\n[129.6968, 135.7689]80\n[128.0896, 137.3761]95\n\n\nRW(FECHAMENTO ~ drift())\n194\nN(133, 6.6)\n132.7388\n[129.4510, 136.0266]80\n[127.7105, 137.7671]95\n\n\nRW(FECHAMENTO ~ drift())\n195\nN(133, 7.6)\n132.7448\n[129.2209, 136.2687]80\n[127.3554, 138.1342]95\n\n\nRW(FECHAMENTO ~ drift())\n196\nN(133, 8.6)\n132.7508\n[129.0034, 136.4981]80\n[127.0197, 138.4818]95\n\n\nRW(FECHAMENTO ~ drift())\n197\nN(133, 9.5)\n132.7567\n[128.7966, 136.7169]80\n[126.7002, 138.8132]95\n\n\n\n\n\n\nA Figure 2.13 plota tais intervalos juntamente com a série.\n\n\n\n\n\nFigure 2.13: Intervalo de previsão para a série do índice Ibovespa\n\n\n\n\n\n2.3.1 Transformações\nTransformações podem ser usadas nas séries temporais, de forma a garantir, por exemplo, que as pressuposições sobre os resíduos sejam cumpridas, ou que alguma variação que aumenta ou cresce com o tempo seja corrigida. A transformação logarítima é geralmente útil. Tomando a série original, \\(y_1, y_2, ..., y_T\\), a série transformada fica \\(w_1, w_2, ..., w_T\\), com \\(w_t =log(y_t)\\). Uma mudança na escala log com base 10 em uma unidade corresponde uma multiplicação por 10 na escala original.\nOutras transformações podem ser mais interessantes em alguns casos, porém nem sempre de fácil interpretação, por exemplo as transfoprmações de potência, \\(w_t = y_t^p\\). A transformação de Box-Cox envolve ambos logarítmo e potência, conforme segue.\n\\[\nw_t = \\Bigg\\{ \\begin{matrix}\n                \\text{log}(y_t), \\text{ }\\lambda=0 \\\\\n                (\\text{sign}(y_t)|y_t|^\\lambda-1)/\\lambda, \\text{ }\\lambda&gt;0\n             \\end{matrix}\n\\]\nonde \\(\\text{sign}(y_t) = 1\\) se \\(y\\geq0\\) e \\(\\text{sign}(y_t) =-1\\), caso contrário.\nNa Figure 2.14 apresenta-se graficamente a série temporal das ações da vale (VALE3), https://br.investing.com/equities/vale-on-n1-historical-data. Pode-se observar que a série apresenta alta variabilidade, especialmente de 2021 a 2023.\n\n\n\n\n\nFigure 2.14: Série temporal do valor da ação VALE3\n\n\n\n\nNa Figure 2.15 apresenta-se a mesma série após transformação de Box-Cox com \\(\\lambda = 1,27\\).\n\n\n\n\n\nFigure 2.15: Série temporal do valor da ação VALE3 com transformação de Box-Cox"
  },
  {
    "objectID": "ST2.html#avaliação-de-modelos-de-séries-temporais",
    "href": "ST2.html#avaliação-de-modelos-de-séries-temporais",
    "title": "2  Análise descritiva, métodos simples de previsão e diagnóstico",
    "section": "2.4 Avaliação de modelos de séries temporais",
    "text": "2.4 Avaliação de modelos de séries temporais\nUma avaliação ideal de um modelo de séries temporais deve ser baseada no desempenho do modelo em novos dados e não nos valores residuais. Para tal, deve-se considerar dados separados para teste do modelo ou em dados futuros. Portanto, não se deve considerar os dados usados para estimar (treinar) o modelo para testá-lo.\nConforme visto no caso para dados de temperatura instantânea para São João del-Rei, uma primeira abordagem consiste em simplesmente usar parte inicial da série para treino do modelo e as últimas observações para teste. O percentual de observações usadas para treino/teste depende do número de observações disponíveis na série.\nNa Figure 2.16 ilustra-se arbitrariamente a separação das primeiras 75% observações em treino e os 25% restantes para teste.\n\n\n\n\n\nFigure 2.16: Observações de treino e teste para validar séries temporais\n\n\n\n\nO erro de previsão (não confundir com resíduo) é calculado conforme segue, com os dados de treino \\(y_1,...,y_T\\) e de teste \\(y_{T+1}, y_{T+2}, ...\\).\n\\[\ne_{T+h} = y_{T+h} - \\hat{y}_{T+h|T}\n\\]\nO desempenho do modelo pode ser medido por diversas métricas. A Table 2.8 apresenta as principais métricas de ajuste. O erro médio absuluto (mean absolute error - MAE) e a raiz da média dos quadrados dos erros (root mean square error - RMSE) são medidos na mesma escala da variável da série. O MAE é menos suscetível a outliers e ambos devem ser minimizados. O O erro percentual médio absuluto (mean absolute percentage error - MAPE) tem a vantagem de ser livre de escala, permitindo a comparação do erro em séries distintas.\n\n\nTable 2.7: My Caption\n\n\nMétrica\nFórmula\n\n\n\n\nMAE\n\\(\\text{MAE = mean}(|e_t|)\\)\n\n\nRMSE\n\\(\\text{RMSE = }\\sqrt{\\text{mean}(e_t^2)}\\)\n\n\nMAPE\n\\(\\text{MAPE = mean}(|p_t|)\\), \\(p_t = 100e_t/y_t\\)\n\n\nMASE\n\\(\\text{MAE = mean}(|q_j|)\\)\n\n\n\n\nAs métricas com o erro padronizado, \\(q_j\\), são alternativais ao MAPE para comparar desempenho em séries distintas. Elas consideram a escala dos dados de treino para tal. A fórmula a seguir é usada para padronizar os erros. Em séries sazonais substitui-se \\(T-1\\) por \\(T-m\\), onde \\(m\\) é o período sazonal. O MASE na tabela acima considera tal padronização.\n\\[\nq_j = \\frac{e_j}{\\frac{1}{T-1}\\sum_{t+2}^T |y_t-y_{t-1}|}\n\\]\nA Table 2.8 expõe o desempenho dos três métodos considerados nos dados de temperatura instantânea de São João-del-Rei. O método Ingênuo sazonal para esta série foi o que apresentou melhor ajuste.\n\n\n\n\nTable 2.8: Valores das estatísticas Q e Q* para os resíduos do método da deriva para o índice Ibovespa\n\n\n.model\nRMSE\nMAE\nMAPE\n\n\n\n\nIngenuo\n5.923621\n4.980952\n23.721859\n\n\nIngenuo sazonal\n1.700928\n1.405357\n8.140928\n\n\nmedia\n5.697090\n5.171627\n27.555762"
  },
  {
    "objectID": "ST2.html#referências",
    "href": "ST2.html#referências",
    "title": "2  Séries Temporais - Análise descritiva, métodos simples de previsão e diagnóstico",
    "section": "2.5 Referências",
    "text": "2.5 Referências\nHyndman, R.J., & Athanasopoulos, G. (2021) Forecasting: principles and practice, 3rd edition, OTexts: Melbourne, Australia. OTexts.com/fpp3. Accessed on 01/10/2024."
  },
  {
    "objectID": "ST3.html#decomposição",
    "href": "ST3.html#decomposição",
    "title": "3  Decomposição de séries temporais",
    "section": "3.1 Decomposição",
    "text": "3.1 Decomposição\nAs séries temporais exibem comportamentos variados. A decomposição de séries temporais pode facilitar a análise. Geralmente considera-se a tendência, sazonalidade e o resto na decomposição, havendo vários métodos para separar tais componentes. Antes, porém, são importantes algumas considerações sobre tratamentos iniciais às vezes necessários.\n\n3.1.1 Transformações e ajustes\nAlguns ajustes são comumente necessários antes de realizar a decomposição de uma série temporal. Por exemplo, em alguns casos é importante corrigir a sazonalidades devido à diferenças de calendário. Em séries que exibem alguma variável com frequência mensal, pode haver alguma sazonalidade nos meses com número menor de dias, sendo interessante talvez trabalhar com a média mensal, dividindo a variável pelo número de dias de cada mês.\nDados relacionados à população também podem ser ajustados per capita, ou por pessoa. Este ajuste é muito comum no PIB e outras variáveis econômicas, por exemplo. Em séries relacionadas a disponibilidade de algum serviço para a população é mais fácil avaliar a disponibilidade ajustando os dados por mil pessoas, por exemplo, de forma a eliminar o efeito do crescimento populacional. O mesmo pode ser feito para séries de saúde pública, por exemplo de número de pessoas infectadas ou a mortalidade pode ser dividida por 1000 ou 100 mil, dependendo da ordem de grandeza de cada série, de forma a viabilizar comparação entre populações de localidades distintas.\nTransformações como a de Box-Cox ou outra mais simples também podem ser úteis para facilitar o tratamento da série. Conforme visto anteriormente, uma série que exibe uma variação sazonal não constante, ou heterocedástica, ao ser transformada pode exibir um padrão de sazonalidade de mais fácil decomposição ou tratamento.\nA série plotada na Figure 3.1 consiste na produção mensal de gás natural no Brasil a partir os anos 2000. A série está disponível em https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-estatisticos.\n\n\n\n\n\nFigure 3.1: Produção mensal de gás natural no Brasil\n\n\n\n\nA Figure 3.2 plota novamente considerando a normalização por número de dias no mês.\n\n\n\n\n\nFigure 3.2: Produção mensal de gás natural no Brasil\n\n\n\n\nA série normalizada é submetida a uma transformação de Box-Cox de forma a corrigir a heterocedasticidade, com \\(\\lambda=-0.06\\), sendo o resultado plotado na Figure 3.3.\n\n\n\n\n\nFigure 3.3: Produção mensal de gás natural no Brasil com transformação de Box-Cox\n\n\n\n\n\n\n3.1.2 Componentes de uma série\nAssumindo uma decomposição aditiva, pode-se escrever\n\\[\ny_t = S_t+ T_t+R_t,\n\\]\nonde \\(S_t\\) é a componente sazonal, \\(T_t\\) é a tendência e \\(R_t\\) é o resto no período \\(t\\). No caso multiplicativo tem-se:\n\\[\ny_t = S_t \\times T_t \\times R_t\n\\]\nO caso multiplicativo é ideal quando a variação em séries sazonais muda com o tempo, seguindo padrão heterocedástico.\nA série plotada na Figure 3.4 exibe o índice de produção física mensal de bens intermediários, ou seja, aqueles empregados na produção de produtos finais, tais como produtos minerais, produtos metalúrgicos, têxteis, papel e celulose, produtos químicos, borracha, plásticos, componentes elétricos e eletrônicos. A série está disponível em https://www.ibge.gov.br/estatisticas/economicas/industria.html.\n\n\n\n\n\nFigure 3.4: Produção mensal de produtos intermediários no Brasil\n\n\n\n\nA sequer exibem-se as primeiras linhas das componentes da série, considerando o caso aditivo.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nname\n.model\nData\nvalue\ntrend\nseason_year\nremainder\nseason_adjust\n\n\n\n\nintermediarios\nstl\n2002 Jan\n87.97245\n95.10887\n-7.0894994\n-0.0469214\n95.06195\n\n\nintermediarios\nstl\n2002 Feb\n85.22869\n95.33164\n-11.1630761\n1.0601292\n96.39177\n\n\nintermediarios\nstl\n2002 Mar\n94.94150\n95.55440\n0.8473573\n-1.4602601\n94.09414\n\n\nintermediarios\nstl\n2002 Apr\n96.00238\n95.77717\n-2.0387398\n2.2639509\n98.04112\n\n\nintermediarios\nstl\n2002 May\n99.12757\n95.99987\n3.8247141\n-0.6970134\n95.30286\n\n\nintermediarios\nstl\n2002 Jun\n97.15759\n96.22257\n1.7226365\n-0.7876163\n95.43495\n\n\n\n\n\nA série é plotada novamente na Figure 3.5 com a tendência em destaque. Observa-se dois períodos de queda mais acentuada relativos à crise de 2008/2009 e à pandemia de COVID-19.\n\n\n\n\n\nFigure 3.5: Produção mensal de produtos intermediários no Brasil com tendência em destaque\n\n\n\n\nAs componentes são plotadas separadamente na Figure 3.6.\n\n\n\n\n\nFigure 3.6: Componentes da série de produtos intermediários\n\n\n\n\n\n\n3.1.3 Dados com sazonalidade ajustada\nPode ser útil remover a sazonalidade da série, resultando em uma série com sazonalidade ajustada. Para casos aditivos a série resultante seria dada por \\(y_t-S_t\\), enquanto que para casos multiplicativos seria \\(y_t/S_t\\).\nNa Figure 3.7 plota-se a série de produtos intermediários ajustada sazonalmente.\n\n\n\n\n\nFigure 3.7: Série de produtos intermediários com ajuste da sazonalidade\n\n\n\n\n\n\n3.1.4 Média móvel\nUm dos métodos clássicos para estimar a tendência é a média móvel. Uma média móvel de ordem \\(m\\) pode ser escrita como\n\\[\n\\hat{T}_t=\\frac{1}{m}\\sum_{j=-k}^{k} y_{t+j}\n\\]\nDenota-se uma média móvel como \\(m\\)-MA, ou média móvel de ordem \\(m\\). A título de exemplo seja a série \\(5,10,12,20,23,27\\). Considerando \\(k = 2\\), tem-se uma média móvel de ordem \\(m=5\\), 5-MA. Para este caso, seguem os cálculos das médias móveis para a terceira e quarta observações, \\(t=3,4\\).\n\\[\n\\hat{T}_3=\\frac{1}{2\\times2+1}(5+10+12+20+23)=14\n\\]\n\\[\n\\hat{T}_4=\\frac{1}{2\\times2+1}(10+12+20+23+27)=18,4\n\\]\nNa Figure 3.8 observa-se graficamente a média móvel com diferentes ordens, para a série de volume de carros produzidos no Brasil. Quando maior a ordem da série, mais suave o resultado.\n\n\n\n\n\nFigure 3.8: Média móvel para a série de carros produzidos com distintas defasagens\n\n\n\n\nÉ interessante às vezes realizar a média móvel de uma média móvel, como objetivo ao final de centrar médias móveis pares. Uma média móvel \\(2\\times4\\)-MA consiste em uma média móvel \\(4\\)-MA seguida de uma \\(2\\)-MA.\nPor exemplo, para a série da Table 3.1 o problema da média móvel \\(4\\)-MA é que ela não é simétrica em relação à série original, tendo uma observação não estimada no início e duas no final. Ao tomar desta série resultante uma média móvel de ordem \\(2\\)-MA, resultando na \\(2\\times4\\)-MA, tem-se uma série média móvel simétrica com a original, com duas observações ausentes no início e fim.\n\n\nTable 3.1: My Caption\n\n\nSérie\n\\(4\\)-MA\n\\(2\\times4\\)-MA\n\n\n\n\n5\n\n\n\n\n10\n11,75\n\n\n\n12\n16,25\n14\n\n\n20\n20,5\n18,375\n\n\n23\n25\n22,75\n\n\n27\n\n\n\n\n30\n\n\n\n\n\n\n\n\n3.1.5 Estimando a tendência com dados sazonais\nAo realizar uma média móvel \\(2\\times4\\)-MA, a estimativa feita ao final fica conforme a Equação abaixo.\n\\[\n\\hat{T}_t=\\frac{1}{8}y_{t-2}+\\frac{1}{4}y_{t-1}+\\frac{1}{4}y_{t}+\\frac{1}{4}y_{t+1}+\\frac{1}{8}y_{t+2}\n\\]\nEste modelo pode ser usado para estimar tendência de séries com sazonalidade quadrimestral, por exemplo. Recomenda-se usar uma média móvel de ordem \\(2\\times m\\)-MA para estimar a tendência de uma série com sazonalidade de ordem \\(m\\).\nNa Figure 3.9 observa-se novamente a série de índice de produção de itens intermediários plotada sazonalmente. Como ficou clara a sazonalidade anual, pode-se pensar na suavização de ordem \\(2\\times 12\\)-MA.\n\n\n\n\n\nFigure 3.9: Gráfico sazonal da série de produtos intermediários\n\n\n\n\nA Figure 3.10 exibe a série do índice de produção de produtos intermediários com média móvel \\(2\\times 12\\)-MA. Pode-se confirmar que a sazonalidade foi eliminada. A tendência estimada é muito similar a obtida anteriormente com método mais sofisticado.\n\n\n\n\n\nFigure 3.10: Tendência para a série de produtos intermediários estimada com média móvel\n\n\n\n\n\n\n3.1.6 Decomposição clássica\nA decomposição clássica tem um século de tradição e é o primeiro método para tal. Há duas formas, a aditiva e a multiplicativa. A seguir os passos para a decomposição aditiva:\n\nSe o período sazonal, \\(m\\), é par, estime a tendência \\(\\hat{T}_t\\) como uma média móvel \\(2\\times m\\)-MA. Se \\(m\\) é ímpar, estime a tendência com uma média móvel \\(m\\)-MA.\nCalcule a série sem a tendência, \\(y_t - \\hat{T}_t\\).\nCalcule a componente sazonal para cada estação como a média de todos os períodos desta. Por exemplo, para uma série com sazonalidade anual. O mês de janeiro terá como valor de \\(\\hat{S}_t\\) a média de todas as observações de janeiro. O procedimento é realizado para todos os meses.\nCalcule o resto tomando a diferença da série em relação a tendência a sazonalidade, \\(\\hat{R}_t=y_t - \\hat{T}_t - \\hat{S}_t\\).\n\nA Figure 3.11 expõe o resultado gráfico da decomposição clássica da série de produtos intermediários. Pode-se observar que neste caso a sazonalidade é constante, diferente do resultado óbtido com método mais sofisticado.\n\n\n\n\n\nFigure 3.11: Decomposição clássica da série de produtos intermediários\n\n\n\n\nPassos para a decomposição multiplicativa.\n\nSe o período sazonal, \\(m\\), é par, estime a tendência \\(\\hat{T}_t\\) como uma média móvel \\(2\\times m\\)-MA. Se \\(m\\) é ímpar, estime a tendência com uma média móvel \\(m\\)-MA.\nCalcule a série sem a tendência, \\(y_t / \\hat{T}_t\\).\nCalcule a componente sazonal para cada estação como a média de todos os períodos desta. Por exemplo, para uma série com sazonalidade anual. O mês de janeiro terá como valor de \\(\\hat{S}_t\\) a média de todas as observações de janeiro. O procedimento é realizado para todos os meses.\nCalcule o resto tomando a diferença da série em relação a tendência a sazonalidade, \\(\\hat{R}_t=y_t / (\\hat{T}_t \\times \\hat{S}_t)\\).\n\nA Figure 3.12 plota o número de passageiros em vôos no Brasil, disponível em https://www.anac.gov.br/acesso-a-informacao/dados-abertos/areas-de-atuacao/todos-os-dados-abertos.\n\n\n\n\n\nFigure 3.12: Série de passageiros de vôos no Brasil\n\n\n\n\nObserva-se na Figure 3.13 sazonalidade anual com picos nos períodos de férias escolares, em Julho e Dezembro/Janeiro.\n\n\n\n\n\nFigure 3.13: Gráfico sazonal da série de passageiros de vôos no Brasil\n\n\n\n\nA Figure 3.14 expõe o resultado gráfico da decomposição clássica multiplicativa da série de Passageiros em vôos no Brasil.\n\n\n\n\n\nFigure 3.14: Decomposição clássica multiplicativa da série de passageiros de vôos no Brasil\n\n\n\n\n\n\n3.1.7 Métodos usados por agências de estatística\nO método X-11 é discutido em Dagum & Bianconcini (2016). Possibilita a decomposição aditiva e a multiplicativa, é robusto a altas variações e outliers e a estimativa de tendência é disponível em toda série. O método também captura outras formas de sazonalidade e feriados.\nA Figure 3.15 o resultado da decomposição aditiva pelo método X-11 na série do Índice de produção de produtos intermediários.\n\n\n\n\n\nFigure 3.15: Decomposição da série de produtos intermediários via X-11\n\n\n\n\nO método SEATS consiste em uma decomposição sazonal de séries temporais por ARIMA (ARIMA será discutida futuramente) e foi proposto pelo Banco da Espanha. A Figure 3.16 expõe o resultado gráfico do método SEATS para decompor a série de passageiros em vôos do Brasil.\n\n\n\n\n\nFigure 3.16: Decomposição da série de produtos intermediários via SEATS\n\n\n\n\n\n\n3.1.8 Decomposição via STL\nA sigla STL significa Seasonal and Trend decomposition using Loess”* que em português seria Decomposição de tendência e sazonalidade usando LOESS, enquanto LOESS é um método de regressão não linear, locally estimated scatterplot smoothing, ou em tradução livre suavização por regressão local.\nO método STL apresenta diversas vantagens em relação aos anteriores:\n\nTrata qualquer tipo de sazonalidade;\nA componente sazonal pode mudar com o tempo;\nA suavização da tendência pode ser controlada pelo usuário;\nPode ser robusto a outliers (há uma opção para tal), de forma que desvios não usuáis não afetaram a tendência e ciclo, mas o resto.\n\nO método, entretanto, tem algumas limitações. As possibilidades elencadas são disponíveis apenas para decomposições aditivas. Para casos multiplicativs, recomenda-se trasnformar a série via logaritmo e depois fazer a decomposição aditiva.\nA Figure 3.17 expõe os gráficos da decomposição do logarítmo da série de passageiros em vôos do Brasil.\n\n\n\n\n\nFigure 3.17: Decomposição da série de passageiros de vôos no Brasil\n\n\n\n\n\n\n3.1.9 Previsão via decomposição\nA Figura Figure 3.18 apresenta a previsão via decomposição para o caso anterior. Foi considerado até o ano de 2018 para treinamento e pode-se observar a previsão para 2019 e 2020 junto com as observações disponíveis.\n\n\n\n\n\nFigure 3.18: Previsão via decomposição da série de log(passageiros) de vôos no Brasil\n\n\n\n\nA Figura Figure 3.19 apresenta os resíduos obtidos da decomposição para o caso anterior. Observa-se que apresentam boa aderência à normal e sem presença de autocorrelação.\n\n\n\n\n\nFigure 3.19: Resíduos do modelo obtido via decomposição por STL da série de log(passageiros)"
  },
  {
    "objectID": "ST1.html#introdução-à-previsão-e-séries-temporais",
    "href": "ST1.html#introdução-à-previsão-e-séries-temporais",
    "title": "1  Introdução e gráficos",
    "section": "1.1 Introdução à Previsão e Séries Temporais",
    "text": "1.1 Introdução à Previsão e Séries Temporais\nUma série temporal consiste em um conjunto de observações de uma variável aleatória ordenada no tempo. A Análise de Séries temporais visa o estudo e obtenção de modelos preditivos para este tipo de dados. O objetivo ao final é realizar previsões com o modelo obtido, de forma a viabilizar ações de planejamento, prever cenários e possibilidades.\nA previsão é importante em diversos contextos das engenharias, administração e ciências. Por exemplo, para decidir o nível de produção e planejar o próximo período é importante prever a demanda. Para avaliar se um investimento é viável é importante prever a sua rentabilidade. Para planejamento dos sistemas energéticos é importante prever o consumo de energia. Para prever a capacidade de produção de energia hidroelétrica é preciso prever a precipitação."
  },
  {
    "objectID": "ST1.html#exemplos-de-séries-e-visualizações",
    "href": "ST1.html#exemplos-de-séries-e-visualizações",
    "title": "1  Introdução e gráficos",
    "section": "1.2 Exemplos de séries e visualizações",
    "text": "1.2 Exemplos de séries e visualizações\n\n1.2.1 Séries univariadas\nNa Figure fig-ipca1 observa-se graficamente a série temporal do índice de preços ao consumidor (IPCA), com frequência mensal a partir de 1980. A série foi obtida em http://www.ipeadata.gov.br. As primeiras observações da série também são exibidas na Table tbl-ipca. Observa-se claramente como a inflação no país foi controlada a partir da adoção do plano real.\n\n\n\n\nTable 1.1: IPCA no Brasil\n\n\nindex\nvalue\n\n\n\n\n1980 Feb\n4.62\n\n\n1980 Mar\n6.04\n\n\n1980 Apr\n5.29\n\n\n1980 May\n5.70\n\n\n1980 Jun\n5.31\n\n\n1980 Jul\n5.55\n\n\n\n\n\n\n\n\n\n\n\nFigure 1.1: IPCA no Brasil\n\n\n\n\nPara visualizar melhor como o IPCA variou nos últimos 20 anos, pode-se selecionar os dados a partir do ano 2000. O resultado é plotado na Figure fig-ipca2.\n\n\n\n\n\nFigure 1.2: IPCA no Brasil a partir de 2000\n\n\n\n\nA Table tbl-carros exibe as primeiras observações da série temporal de volume de carros produzidos no Brasil a partir de 1990. A série foi obtida em https://anfavea.com.br/site/edicoes-em-excel/ e apresenta frequência mensal.\n\n\n\n\nTable 1.2: Produção de carros no Brasil\n\n\ndata\nvalor\n\n\n\n\n1990-02-01\n57258\n\n\n1990-03-01\n32740\n\n\n1990-04-01\n32812\n\n\n1990-05-01\n58464\n\n\n1990-06-01\n37632\n\n\n1990-07-01\n43697\n\n\n\n\n\n\nA série é plotada na Figure fig-carros. Pode-se observar alguns períodos de queda no volume, por exemplo, próximo de 2015 durante a crise política do país e em 2020 durante a pandemia, onde a produção chegou a níveis anteriores aos dos anos 2000.\n\n\n\n\n\nFigure 1.3: Produção de carros no Brasil\n\n\n\n\n\n\n1.2.2 Séries temporais multivariadas\nNa Table tbl-energia1 são observados séries de produção de quatro tipos de energia para o ano de 2023 no Brasil. Os dados são fornecidos em frequência horária e estão disponíveis em https://dados.ons.org.br/group/programacao-da-operacao.\nA série temporal multivariada é plotada na Figure fig-energia1. Pode-se observar o aumento na produção das fontes complementares quando a hidráulica apresentou declínio no período mais seco do ano.\n\n\n\n\nTable 1.3: Produção de energia no Brasil em 2023\n\n\ndin_instante\nname\nvalue\n\n\n\n\n2023-01-01 00:00:00\nhidraulica\n39057.309\n\n\n2023-01-01 00:00:00\ntermica\n5698.335\n\n\n2023-01-01 00:00:00\neolica\n14138.750\n\n\n2023-01-01 00:00:00\nsolar\n21.155\n\n\n2023-01-01 01:00:00\nhidraulica\n39624.650\n\n\n2023-01-01 01:00:00\ntermica\n5727.550\n\n\n\n\n\n\n\n\n\n\n\nFigure 1.4: Produção de energia no Brasil em 2023\n\n\n\n\nA série temporal multivariada é plotada em múltiplos painéis na Figure fig-energia2_.\n\n\n\n\n\nFigure 1.5: Produção de energia no Brasil em 2023, gráfico de painéis\n\n\n\n\nAs primeiras observações da série temporal multivariada de produção de milho, mandioca e batata no Brasil é observada na Table tbl-agric. Os valores são observados de 3 em 3 anos, https://www.fao.org/faostat/en/#data/QCL. A série completa é plotada na Figure fig-agric. Observa-se que a série de milho apresenta um padrão linear até 2005 e depois outro padrão linear porém, com maior inclinação, destacando-se em relação às outras séries. A produção de mandioca apresenta cíclico irregular com tendência de queda.\n\n\n\n\nTable 1.4: Produção de milho, mandioca e batata\n\n\nItem\nYear\nValue\n\n\n\n\nmandioca\n1963\n22248640\n\n\nmandioca\n1966\n24710048\n\n\nmandioca\n1969\n30073936\n\n\nmandioca\n1972\n29828912\n\n\nmandioca\n1975\n26117616\n\n\nmandioca\n1978\n25459408\n\n\n\n\n\n\n\n\n\n\n\nFigure 1.6: Produção de milho, mandioca e batata no Brasil\n\n\n\n\nA série de produção de batata é plotada individualmente na Figure fig-batata. Devido a grande diferença em relação aos níveis de produção de milho, aparentemente parecia próxima de estacionária, porém ao plotá-la individualmente, observa-se uma tendência linear de aumento de produção deste item.\n\n\n\n\n\nFigure 1.7: Produção de batata no Brasil\n\n\n\n\nAs últimas observações de mais um exemplo de série temporal multivariada são observadas na Table tbl-tolaju considerando dados de visualizaçoes de 4 vídeos da playlist Tolerâncias e ajustes do Canal da engenharia de manufatura e qualidade\n\n\n\n\nTable 1.5: Visualizações de vídeos de tolerâncias e ajustes no youtube\n\n\nDate\nViews\nVideo\n\n\n\n\n2024-09-15\n15\n#4\n\n\n2024-09-16\n35\n#4\n\n\n2024-09-17\n38\n#4\n\n\n2024-09-18\n27\n#4\n\n\n2024-09-19\n40\n#4\n\n\n2024-09-20\n26\n#4\n\n\n\n\n\n\nA série multivariada é plotada na Figure fig-tolaju. A série inicia em 2018, ano de início do canal, porém só tem dados segundo a data de lançamento de cada vídeo.\n\n\n\n\n\nFigure 1.8: Visualizações de vídeos de tolerâncias e ajustes no youtube\n\n\n\n\nA série do vídeo 4 plotado a partir de setembro de 2018 é exibida na Figure fig-tol4.\n\n\n\n\n\nFigure 1.9: Visualizações do vídeo 4\n\n\n\n\n\n\n1.2.3 Graficos de sazonalidade\nPode-se visualizar os dados da série do vídeo 4 em subséries anuais, de forma a ver a sazonalidade presente nos dados. A Figure fig-saz4 expõe o gráfico. Os dados foram agregados mensalmente. Pode-se visualizar os picos de visualizações em Abril a Junho e de Setembro a Outubro coincidindo com períodos de picos de estudos nos primeiro segundo semestres anuais.\n\n\n\n\n\nFigure 1.10: Gráfico sazonal: Visualizações do vídeo 4\n\n\n\n\nPode-se plotar o gráfico sazonal visualizando a variação anual dentro de cada mês, conforme Figure fig-saz4_.\n\n\n\n\n\nFigure 1.11: Gráfico de subséries sazonais: Visualizações do vídeo 4\n\n\n\n\n\n\n1.2.4 Correlação entre séries\nEm algumas situações é importante agregar os dados de forma a facilitar a interpretação. A Figure fig-energia2 plota a mesma série da Figure fig-energia1, porém agregada diariamente. Fica mais fácil notar a correlação negativa entre a série hidráulica e as demais.\n\n\n\n\n\nFigure 1.12: Produção de energia no Brasil em 2023, série diária\n\n\n\n\nPode-se visualizar a correlação aos pares entre os diferentes tipos de energia considerados na Figure fig-ener_cor. Os gráficos de dispersão e as respectivas correlações são observadas aos pares.\n\n\n\n\n\nFigure 1.13: Correlação aos pares entre fontes de energia no Brasil\n\n\n\n\nPara uma interpretação ainda mais fácil realiza-se uma última agregação a nível mensal, conforme Figure fig-ener3.\n\n\n\n\n\nFigure 1.14: Produção de energia no Brasil em 2023, série mensal\n\n\n\n\nObserva-se na Figure fig-ener_cor2 que a correlação considerando a frequência mensal fica muito mais clara.\n\n\n\n\n\nFigure 1.15: Correlação aos pares entre fontes de energia no Brasil\n\n\n\n\n\n\n1.2.5 Gráficos de decomposição de séries temporais\nA Figure fig-co2 apresenta a série temporal de níveis de CO2 na atmosfera medida no Observatório Mauna Loa, Havaí, desde 1958, https://climate.nasa.gov/vital-signs/carbon-dioxide. Observa-se um padrão de crescimento não linear com ciclos sazonais bem definidos.\n\n\n\n\n\nFigure 1.16: Níveis de CO2 na atmosfera, Observatório Mauna Loa, Havaí\n\n\n\n\nA Figure fig-co2_ plota apenas os últimos 4 anos da série. Pode-se observar que os períodos sazonais de pico coincidem com o início da primavera no hemisfério norte, enquanto os vales são observados no período de crescimento das plantas, as quais capturam parte significativa do CO2 da atmosfera.\n\n\n\n\n\nFigure 1.17: Níveis de CO2 na atmosfera, a partir de 2020\n\n\n\n\nO gráfico sazonal também pode ser útil neste caso, conforme Figure fig-co2saz. Observa-se claramente a sazonalidade com pico próximo de maio e declínio próximo de outubro. A tendência de aumento anual de emissões também fica clara na escala de cor.\n\n\n\n\n\nFigure 1.18: Gráfico sazonal de níveis de CO2 na atmosfera\n\n\n\n\nExistem diversas formas de decompor séries temporais. A Table tbl-co2decomp expõe os resultados de uma decomposição aditiva da série CO2. A componente cíclica é removida e o restante é suavizado para encontrar uma tendência. O resíduo consiste na diferença entre a série original e a soma da tendência e da componente sazonal.\n\n\n\n\n\n\nTable 1.6:  Gráficos de decomposição da série de níveis de CO2 na atmosfera \n  \n    \n      CO2\n      trend\n      season_year\n      remainder\n      season_adjust\n    \n  \n  \n    315.71\n314.9477\n1.0263767\n-0.2640423\n314.6836\n    317.45\n315.0187\n2.2221543\n0.2091377\n315.2278\n    317.51\n315.0898\n2.7703197\n-0.3500701\n314.7397\n    317.27\n315.1608\n2.2787986\n-0.1695914\n314.9912\n    315.87\n315.2266\n0.8557299\n-0.2123500\n315.0143\n    314.93\n315.2924\n-1.0241591\n0.6617119\n315.9542\n  \n  \n  \n\n\n\n\n\nA Figure fig-co2decomp expõe o resultado da decomposição da série de emissões de CO2. Observa-se claramente a separação da tendência e do padrão sazonal da série, facilitando a interpretação desta.\n\n\n\n\n\nFigure 1.19: Gráficos de decomposição da série de níveis de CO2 na atmosfera"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Hyndman, RJ. 2018. Forecasting: Principles and Practice.\nOTexts."
  }
]